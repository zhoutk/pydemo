DROP VIEW IF EXISTS `v_goods_category_1`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_goods_category_1` AS select `onlinetest`.`goods_category`.`id` AS `id`,`onlinetest`.`goods_category`.`name` AS `name`,`onlinetest`.`goods_category`.`remark` AS `remark`,`onlinetest`.`goods_category`.`goods_type` AS `goods_type`,`onlinetest`.`goods_category`.`status` AS `status`,`onlinetest`.`goods_category`.`pid` AS `pid`,`onlinetest`.`goods_category`.`adv_pic` AS `adv_pic`,`onlinetest`.`goods_category`.`adv_title` AS `adv_title` from `onlinetest`.`goods_category` where (`onlinetest`.`goods_category`.`pid` = 0);

DROP VIEW IF EXISTS `v_goods_category_2`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_goods_category_2` AS select `onlinetest`.`goods_category`.`id` AS `id`,`onlinetest`.`goods_category`.`name` AS `name`,`onlinetest`.`goods_category`.`remark` AS `remark`,`onlinetest`.`goods_category`.`goods_type` AS `goods_type`,`onlinetest`.`goods_category`.`status` AS `status`,`onlinetest`.`goods_category`.`pid` AS `pid`,`onlinetest`.`goods_category`.`adv_pic` AS `adv_pic`,`onlinetest`.`goods_category`.`adv_title` AS `adv_title` from (`onlinetest`.`v_goods_category_1` join `onlinetest`.`goods_category` on((`onlinetest`.`goods_category`.`pid` = `v_goods_category_1`.`id`)));

DROP VIEW IF EXISTS `v_goods_category_3`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_goods_category_3` AS select `onlinetest`.`goods_category`.`id` AS `id`,`onlinetest`.`goods_category`.`name` AS `name`,`onlinetest`.`goods_category`.`remark` AS `remark`,`onlinetest`.`goods_category`.`goods_type` AS `goods_type`,`onlinetest`.`goods_category`.`status` AS `status`,`onlinetest`.`goods_category`.`pid` AS `pid`,`onlinetest`.`goods_category`.`adv_pic` AS `adv_pic`,`onlinetest`.`goods_category`.`adv_title` AS `adv_title` from (`onlinetest`.`goods_category` join `onlinetest`.`v_goods_category_2` on((`onlinetest`.`goods_category`.`pid` = `v_goods_category_2`.`id`)));

DROP VIEW IF EXISTS `v_goods_category`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_goods_category` AS select `v_goods_category_3`.`id` AS `id3`,`v_goods_category_3`.`name` AS `name3`,`v_goods_category_2`.`id` AS `id2`,`v_goods_category_2`.`name` AS `name2`,`v_goods_category_1`.`id` AS `id1`,`v_goods_category_1`.`name` AS `name1`,`v_goods_category_2`.`adv_pic` AS `adv_pic`,`v_goods_category_2`.`adv_title` AS `adv_title` from ((`onlinetest`.`v_goods_category_3` join `onlinetest`.`v_goods_category_2` on((`v_goods_category_3`.`pid` = `v_goods_category_2`.`id`))) join `onlinetest`.`v_goods_category_1` on((`v_goods_category_2`.`pid` = `v_goods_category_1`.`id`))) order by `v_goods_category_1`.`id`,`v_goods_category_2`.`id`;

DROP VIEW IF EXISTS `v_goods_on_tags_for_group`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_goods_on_tags_for_group` AS select `onlinetest`.`goods_on_tags`.`id` AS `id`,`onlinetest`.`goods_on_tags`.`goods_id` AS `goods_id`,`onlinetest`.`goods_on_tags`.`tag_id` AS `tag_id`,`onlinetest`.`goods_on_tags`.`status` AS `status`,`onlinetest`.`goods_tag`.`tag_name` AS `tag_name`,`onlinetest`.`goods_tag`.`tag_group` AS `tag_group`,`onlinetest`.`goods_tag`.`tag_type` AS `tag_type`,`onlinetest`.`goods_tag`.`picpath` AS `picpath` from (`onlinetest`.`goods_on_tags` join `onlinetest`.`goods_tag` on((`onlinetest`.`goods_on_tags`.`tag_id` = `onlinetest`.`goods_tag`.`id`)));

DROP VIEW IF EXISTS `goods_list_search`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `goods_list_search` AS select `onlinetest`.`goods`.`id` AS `id`,`onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`goods`.`title_pic` AS `title_pic`,`onlinetest`.`goods_brand`.`name` AS `brand_name`,`onlinetest`.`goods`.`start_time` AS `start_time`,`onlinetest`.`goods`.`end_time` AS `end_time`,`onlinetest`.`goods`.`amount` AS `amount`,`onlinetest`.`goods`.`price` AS `price`,`onlinetest`.`goods`.`sale_price` AS `sale_price`,`onlinetest`.`goods`.`send_hour` AS `send_hour`,`onlinetest`.`goods`.`safeguard_json` AS `safeguard_json`,`onlinetest`.`goods`.`activity_json` AS `activity_json`,`onlinetest`.`goods`.`status` AS `status`,`onlinetest`.`goods`.`create_time` AS `create_time`,`onlinetest`.`goods`.`update_time` AS `update_time`,`onlinetest`.`goods_brand`.`id` AS `brand_id`,`v_goods_category`.`id3` AS `category3`,`v_goods_category`.`name3` AS `category_name3`,`v_goods_category`.`id2` AS `category2`,`v_goods_category`.`name2` AS `category_name2`,`v_goods_category`.`id1` AS `category1`,`v_goods_category`.`name1` AS `categroy_name1`,`onlinetest`.`goods`.`category` AS `category`,`onlinetest`.`goods`.`sale_count` AS `goods_sale_count`,`onlinetest`.`goods`.`collection_count` AS `collection_count`,`onlinetest`.`goods`.`report_count` AS `report_count`,`onlinetest`.`goods`.`trade_send` AS `trade_send`,`onlinetest`.`goods`.`hot_sell` AS `hot_sell`,`onlinetest`.`goods`.`base_sale_count` AS `goods_base_sale_count`,`onlinetest`.`goods`.`less_stock` AS `less_stock`,`onlinetest`.`goods`.`base_collection_count` AS `base_collection_count`,`onlinetest`.`goods`.`sequence` AS `sequence`,`v_goods_on_tags_for_group`.`tag_id` AS `tag_id`,`v_goods_on_tags_for_group`.`tag_name` AS `tag_name`,`v_goods_on_tags_for_group`.`tag_group` AS `tag_group`,`v_goods_on_tags_for_group`.`tag_type` AS `tag_type`,`v_goods_on_tags_for_group`.`status` AS `tag_status`,ifnull(concat(`onlinetest`.`goods`.`name`,'|',ifnull(`onlinetest`.`goods_brand`.`name`,''),'|',ifnull(`v_goods_on_tags_for_group`.`tag_name`,''),'|',ifnull(`v_goods_category`.`name1`,''),'|',ifnull(`v_goods_category`.`name2`,''),'|',ifnull(`v_goods_category`.`name3`,'')),'') AS `sch_key` from (((`onlinetest`.`goods` left join `onlinetest`.`goods_brand` on((`onlinetest`.`goods`.`brand` = `onlinetest`.`goods_brand`.`id`))) left join `onlinetest`.`v_goods_on_tags_for_group` on((`onlinetest`.`goods`.`id` = `v_goods_on_tags_for_group`.`goods_id`))) left join `onlinetest`.`v_goods_category` on((`onlinetest`.`goods`.`category` = `v_goods_category`.`id3`))) where (`onlinetest`.`goods`.`status` = 3);

DROP VIEW IF EXISTS `member_search`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `member_search` AS select `onlinetest`.`member`.`id` AS `id`,`onlinetest`.`member`.`comp_id` AS `comp_id`,`onlinetest`.`member`.`username` AS `username`,`onlinetest`.`member`.`password` AS `password`,`onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`member`.`realname` AS `realname`,`onlinetest`.`member`.`cardnum` AS `cardnum`,`onlinetest`.`member`.`rank` AS `rank`,`onlinetest`.`member`.`power_json` AS `power_json`,`onlinetest`.`member`.`email` AS `email`,`onlinetest`.`member`.`gender` AS `gender`,`onlinetest`.`member`.`birth_time` AS `birth_time`,`onlinetest`.`member`.`status` AS `status`,`onlinetest`.`member`.`picpath` AS `picpath`,`onlinetest`.`member`.`wx_openid` AS `wx_openid`,`onlinetest`.`member`.`pay_openid` AS `pay_openid`,`onlinetest`.`member`.`level` AS `level`,`onlinetest`.`member`.`points` AS `points`,`onlinetest`.`member`.`fans_like_count` AS `fans_like_count`,`onlinetest`.`member`.`favorite_count` AS `favorite_count`,`onlinetest`.`member`.`like_talent_count` AS `like_talent_count`,`onlinetest`.`member`.`feeling` AS `feeling`,`onlinetest`.`member`.`check_count` AS `check_count`,`onlinetest`.`member`.`create_time` AS `create_time`,`onlinetest`.`member`.`update_time` AS `update_time`,concat(`onlinetest`.`member`.`id`,'|',`onlinetest`.`member`.`username`,'|',`onlinetest`.`member`.`nickname`,'|',convert(`onlinetest`.`member`.`realname` using utf8mb4)) AS `searchVal` from `onlinetest`.`member`;

DROP VIEW IF EXISTS `v_address_view`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_address_view` AS select `onlinetest`.`address`.`id` AS `id`,`onlinetest`.`address`.`u_id` AS `u_id`,`onlinetest`.`address`.`province_id` AS `province_id`,ifnull((select `onlinetest`.`city_zone`.`name` from `onlinetest`.`city_zone` where (`onlinetest`.`city_zone`.`id` = `onlinetest`.`address`.`province_id`)),'') AS `province_name`,`onlinetest`.`address`.`city_id` AS `city_id`,ifnull((select `onlinetest`.`city_zone`.`name` from `onlinetest`.`city_zone` where (`onlinetest`.`city_zone`.`id` = `onlinetest`.`address`.`city_id`)),'') AS `city_name`,`onlinetest`.`address`.`zone_id` AS `zone_id`,ifnull((select `onlinetest`.`city_zone`.`name` from `onlinetest`.`city_zone` where (`onlinetest`.`city_zone`.`id` = `onlinetest`.`address`.`zone_id`)),'') AS `zone_name`,`onlinetest`.`address`.`address` AS `address`,`onlinetest`.`address`.`recv_name` AS `recv_name`,`onlinetest`.`address`.`phone` AS `phone`,`onlinetest`.`address`.`zipcode` AS `zipcode`,`onlinetest`.`address`.`status` AS `status`,`onlinetest`.`address`.`is_default` AS `is_default`,`onlinetest`.`address`.`create_time` AS `create_time`,`onlinetest`.`address`.`update_time` AS `update_time` from `onlinetest`.`address`;

DROP VIEW IF EXISTS `v_advert_acitivity_goods`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_advert_acitivity_goods` AS select `onlinetest`.`advert_acitivity_goods`.`id` AS `id`,`onlinetest`.`advert_acitivity_goods`.`actid` AS `actid`,`onlinetest`.`advert_acitivity_goods`.`goodsid` AS `goodsid`,`onlinetest`.`advert_acitivity_goods`.`sequence` AS `sequence`,`onlinetest`.`advert_acitivity_goods`.`status` AS `status`,`onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`goods`.`price` AS `price`,`onlinetest`.`goods`.`title_pic` AS `title_pic`,`onlinetest`.`goods`.`activity_json` AS `activity_json`,`onlinetest`.`goods`.`sale_count` AS `sale_count`,`onlinetest`.`goods`.`base_sale_count` AS `base_sale_count`,`onlinetest`.`goods`.`sale_price` AS `sale_price` from (`onlinetest`.`advert_acitivity_goods` join `onlinetest`.`goods` on(((`onlinetest`.`advert_acitivity_goods`.`goodsid` = `onlinetest`.`goods`.`id`) and (`onlinetest`.`goods`.`status` = 3))));

DROP VIEW IF EXISTS `v_advert_acitivity_goods_view`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_advert_acitivity_goods_view` AS select `onlinetest`.`advert_acitivity_goods`.`actid` AS `actid`,`onlinetest`.`goods`.`id` AS `id`,`onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`goods`.`title_pic` AS `title_pic`,`onlinetest`.`goods`.`price` AS `price`,`onlinetest`.`goods`.`sale_price` AS `sale_price` from (`onlinetest`.`advert_acitivity_goods` join `onlinetest`.`goods` on((`onlinetest`.`advert_acitivity_goods`.`goodsid` = `onlinetest`.`goods`.`id`)));

DROP VIEW IF EXISTS `v_best_choice_group`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_best_choice_group` AS select `onlinetest`.`best_choice`.`group_id` AS `group_id`,max(`onlinetest`.`best_choice`.`create_time`) AS `create_time`,`onlinetest`.`best_choice`.`status` AS `status` from `onlinetest`.`best_choice` group by `onlinetest`.`best_choice`.`group_id` order by `create_time` desc;

DROP VIEW IF EXISTS `v_city`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_city` AS select `onlinetest`.`address`.`id` AS `id`,`onlinetest`.`address`.`address` AS `address`,`onlinetest`.`address`.`recv_name` AS `recv_name`,`onlinetest`.`address`.`phone` AS `phone`,`onlinetest`.`address`.`status` AS `status`,`onlinetest`.`address`.`is_default` AS `is_default`,`onlinetest`.`address`.`create_time` AS `create_time`,`onlinetest`.`address`.`update_time` AS `update_time`,`onlinetest`.`city_zone`.`id` AS `city_zone` from (`onlinetest`.`city_zone` join `onlinetest`.`address` on((`onlinetest`.`city_zone`.`id` = `onlinetest`.`address`.`zone_id`)));

DROP VIEW IF EXISTS `v_colum_info`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_colum_info` AS select `onlinetest`.`colum_category`.`name` AS `category_name`,`onlinetest`.`colum_info`.`id` AS `id`,`onlinetest`.`colum_info`.`category` AS `category`,`onlinetest`.`colum_info`.`colum_title` AS `colum_title`,`onlinetest`.`colum_info`.`colum_type` AS `colum_type`,`onlinetest`.`colum_info`.`picpath` AS `picpath`,`onlinetest`.`colum_info`.`urlpath` AS `urlpath`,`onlinetest`.`colum_info`.`create_time` AS `create_time`,`onlinetest`.`colum_info`.`order_code` AS `order_code` from (`onlinetest`.`colum_info` join `onlinetest`.`colum_category` on((`onlinetest`.`colum_info`.`category` = `onlinetest`.`colum_category`.`id`)));

DROP VIEW IF EXISTS `v_company`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_company` AS select `onlinetest`.`company`.`id` AS `id`,`onlinetest`.`company`.`pid` AS `pid`,`onlinetest`.`company`.`name` AS `name`,`onlinetest`.`company`.`province_id` AS `province_id`,`onlinetest`.`company`.`type` AS `type`,`onlinetest`.`company`.`city_id` AS `city_id`,`onlinetest`.`company`.`company_name` AS `company_name`,`onlinetest`.`company`.`remark` AS `remark`,`onlinetest`.`company`.`create_time` AS `create_time`,`onlinetest`.`company`.`update_time` AS `update_time`,`c_zone`.`name` AS `city_name`,`p_zone`.`name` AS `province_name`,`onlinetest`.`company`.`start_time` AS `start_time`,`onlinetest`.`company`.`end_time` AS `end_time` from ((`onlinetest`.`company` join `onlinetest`.`city_zone` `p_zone` on((`onlinetest`.`company`.`province_id` = `p_zone`.`id`))) join `onlinetest`.`city_zone` `c_zone` on((`onlinetest`.`company`.`city_id` = `c_zone`.`id`)));

DROP VIEW IF EXISTS `v_fans_order_goods`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_fans_order_goods` AS select `onlinetest`.`order_item`.`goodsid` AS `goodsid`,`onlinetest`.`order_item`.`status` AS `status`,`onlinetest`.`order_item`.`u_id` AS `u_id`,`onlinetest`.`order_item`.`main_order_id` AS `main_order_id` from `onlinetest`.`order_item` group by `onlinetest`.`order_item`.`goodsid`,`onlinetest`.`order_item`.`u_id`;

DROP VIEW IF EXISTS `v_fans_order_goods_view`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_fans_order_goods_view` AS select `oi`.`goodsid` AS `id`,`om`.`u_id` AS `u_id`,`gd`.`name` AS `name`,`gd`.`price` AS `price`,`gd`.`title_pic` AS `title_pic`,`oi`.`status` AS `status` from ((`onlinetest`.`order_main` `om` join `onlinetest`.`v_fans_order_goods` `oi` on((`om`.`id` = `oi`.`main_order_id`))) join `onlinetest`.`goods` `gd` on((`oi`.`goodsid` = `gd`.`id`))) where ((`om`.`consumption_category` <> 3) and (`om`.`consumption_category` <> 5));

DROP VIEW IF EXISTS `v_fans_sign_record_list`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_fans_sign_record_list` AS select `onlinetest`.`fans_sign_record`.`id` AS `id`,`onlinetest`.`fans_sign_record`.`sign_cfg_id` AS `sign_cfg_id`,`onlinetest`.`fans_sign_record`.`fans_id` AS `fans_id`,`onlinetest`.`fans_sign_record`.`create_time` AS `create_time`,`onlinetest`.`fans_sign_record`.`sign_index` AS `sign_index`,`onlinetest`.`fans_sign_record`.`curr_get_points` AS `curr_get_points`,`onlinetest`.`fans_sign_record`.`status` AS `status`,`onlinetest`.`sign_config`.`name` AS `cfg_name`,`onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`member`.`username` AS `username` from ((`onlinetest`.`fans_sign_record` join `onlinetest`.`member` on((`onlinetest`.`fans_sign_record`.`fans_id` = `onlinetest`.`member`.`id`))) join `onlinetest`.`sign_config` on((`onlinetest`.`fans_sign_record`.`sign_cfg_id` = `onlinetest`.`sign_config`.`id`)));

DROP VIEW IF EXISTS `v_fans_ticket`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_fans_ticket` AS select `onlinetest`.`fans_ticket`.`id` AS `id`,`onlinetest`.`fans_ticket`.`fansid` AS `u_id`,`onlinetest`.`fans_ticket`.`ticketid` AS `ticketid`,`onlinetest`.`fans_ticket`.`get_time` AS `get_time`,`onlinetest`.`fans_ticket`.`use_time` AS `use_time`,`onlinetest`.`fans_ticket`.`end_time` AS `end_time`,`onlinetest`.`ticket`.`type` AS `type`,`onlinetest`.`ticket`.`name` AS `name`,`onlinetest`.`ticket`.`full_price` AS `full_price`,`onlinetest`.`ticket`.`price` AS `price`,`onlinetest`.`ticket`.`picurl` AS `picurl`,`onlinetest`.`ticket`.`remark` AS `remark`,`onlinetest`.`ticket`.`can_use` AS `can_use`,`onlinetest`.`ticket`.`effect_hour` AS `effect_hour`,`onlinetest`.`ticket`.`goods_class_json` AS `goods_class_json`,(case when (now() > `onlinetest`.`fans_ticket`.`end_time`) then 2 else `onlinetest`.`fans_ticket`.`status` end) AS `status` from (`onlinetest`.`ticket` join `onlinetest`.`fans_ticket` on((`onlinetest`.`ticket`.`id` = `onlinetest`.`fans_ticket`.`ticketid`)));

DROP VIEW IF EXISTS `v_fans_tryout_goods_view`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_fans_tryout_goods_view` AS select distinct `onlinetest`.`goods`.`id` AS `id`,`onlinetest`.`goods`.`category` AS `goods_category`,`onlinetest`.`tryout_apply`.`fansid` AS `fansid`,`onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`goods`.`title_pic` AS `title_pic`,`onlinetest`.`goods`.`price` AS `price`,`onlinetest`.`tryout`.`id` AS `tryoutid`,`onlinetest`.`tryout_apply`.`status` AS `tryapp_status` from ((`onlinetest`.`tryout_apply` join `onlinetest`.`tryout` on((`onlinetest`.`tryout_apply`.`tryoutid` = `onlinetest`.`tryout`.`id`))) join `onlinetest`.`goods` on((`onlinetest`.`tryout`.`goodsid` = `onlinetest`.`goods`.`id`)));

DROP VIEW IF EXISTS `v_get_my_points`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_get_my_points` AS select `onlinetest`.`member`.`id` AS `id`,`onlinetest`.`member`.`points` AS `points` from `onlinetest`.`member`;

DROP VIEW IF EXISTS `v_gift_card`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_gift_card` AS select `onlinetest`.`gift_card`.`id` AS `id`,`onlinetest`.`gift_card`.`flag` AS `flag`,`onlinetest`.`gift_card`.`batch` AS `batch`,`onlinetest`.`gift_card`.`card_number` AS `card_number`,`onlinetest`.`gift_card`.`show_number` AS `show_number`,`onlinetest`.`gift_card`.`password` AS `password`,`onlinetest`.`gift_card`.`open_price` AS `open_price`,`onlinetest`.`gift_card`.`remaining_price` AS `remaining_price`,`onlinetest`.`gift_card`.`activate_time` AS `activate_time`,`onlinetest`.`gift_card`.`bind_time` AS `bind_time`,`onlinetest`.`gift_card`.`end_time` AS `end_time`,`onlinetest`.`gift_card`.`u_id` AS `u_id`,`onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`gift_card`.`islock` AS `islock`,(case when (`onlinetest`.`gift_card`.`remaining_price` <= 0) then 3 when (`onlinetest`.`gift_card`.`end_time` < now()) then 4 else `onlinetest`.`gift_card`.`status` end) AS `status` from (`onlinetest`.`gift_card` left join `onlinetest`.`member` on((`onlinetest`.`gift_card`.`u_id` = `onlinetest`.`member`.`id`)));

DROP VIEW IF EXISTS `v_gift_card_use_gift_card`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_gift_card_use_gift_card` AS select `onlinetest`.`gift_card_use_record`.`id` AS `id`,`onlinetest`.`gift_card_use_record`.`order_main_id` AS `order_main_id`,`onlinetest`.`gift_card_use_record`.`gift_card_id` AS `gift_card_id`,`onlinetest`.`gift_card_use_record`.`u_id` AS `u_id`,`onlinetest`.`gift_card_use_record`.`price` AS `price`,`onlinetest`.`gift_card_use_record`.`category` AS `category`,`onlinetest`.`gift_card_use_record`.`effect` AS `effect`,`onlinetest`.`gift_card_use_record`.`create_time` AS `create_time`,`onlinetest`.`gift_card`.`card_number` AS `card_number` from (`onlinetest`.`gift_card_use_record` join `onlinetest`.`gift_card` on((`onlinetest`.`gift_card_use_record`.`gift_card_id` = `onlinetest`.`gift_card`.`id`)));

DROP VIEW IF EXISTS `v_gift_card_use_record`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_gift_card_use_record` AS select `onlinetest`.`gift_card`.`card_number` AS `card_number`,`onlinetest`.`gift_card_use_record`.`id` AS `id`,`onlinetest`.`gift_card_use_record`.`order_main_id` AS `order_main_id`,`onlinetest`.`gift_card_use_record`.`u_id` AS `u_id`,`onlinetest`.`gift_card_use_record`.`price` AS `price`,`onlinetest`.`gift_card_use_record`.`category` AS `category`,`onlinetest`.`gift_card_use_record`.`effect` AS `effect`,`onlinetest`.`gift_card_use_record`.`create_time` AS `create_time`,`onlinetest`.`gift_card`.`open_price` AS `open_price`,`onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`gift_card`.`remaining_price` AS `remaining_price`,`onlinetest`.`order_main`.`total_price` AS `total_price`,`onlinetest`.`order_main`.`order_number` AS `order_number`,`onlinetest`.`member`.`username` AS `username`,`onlinetest`.`gift_card_use_record`.`fire_remaining_price` AS `fire_remaining_price` from (((`onlinetest`.`gift_card` join `onlinetest`.`gift_card_use_record` on((`onlinetest`.`gift_card`.`id` = `onlinetest`.`gift_card_use_record`.`gift_card_id`))) join `onlinetest`.`member` on((`onlinetest`.`member`.`id` = `onlinetest`.`gift_card_use_record`.`u_id`))) left join `onlinetest`.`order_main` on((`onlinetest`.`gift_card_use_record`.`order_main_id` = `onlinetest`.`order_main`.`id`))) where (`onlinetest`.`gift_card_use_record`.`effect` = 1);

DROP VIEW IF EXISTS `v_goods_export`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_goods_export` AS select `onlinetest`.`goods`.`id` AS `id`,`onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`goods`.`code` AS `code`,`onlinetest`.`goods`.`comp_id` AS `comp_id`,`onlinetest`.`goods`.`title_pic` AS `title_pic`,`onlinetest`.`goods`.`banner_json` AS `banner_json`,`onlinetest`.`goods`.`details_json` AS `details_json`,`onlinetest`.`goods`.`brand` AS `brand`,`onlinetest`.`goods`.`category` AS `category`,`onlinetest`.`goods`.`start_time` AS `start_time`,`onlinetest`.`goods`.`end_time` AS `end_time`,`onlinetest`.`goods`.`speci_json` AS `speci_json`,`onlinetest`.`goods`.`amount` AS `amount`,`onlinetest`.`goods`.`price` AS `price`,`onlinetest`.`goods`.`sale_price` AS `sale_price`,`onlinetest`.`goods`.`delivery` AS `delivery`,`onlinetest`.`goods`.`send_hour` AS `send_hour`,`onlinetest`.`goods`.`safeguard_json` AS `safeguard_json`,`onlinetest`.`goods`.`activity_json` AS `activity_json`,`onlinetest`.`goods`.`hot_sell` AS `hot_sell`,`onlinetest`.`goods`.`less_stock` AS `less_stock`,`onlinetest`.`goods`.`trade_send` AS `trade_send`,`onlinetest`.`goods`.`status` AS `status`,`onlinetest`.`goods`.`sale_count` AS `sale_count`,`onlinetest`.`goods`.`base_sale_count` AS `base_sale_count`,`onlinetest`.`goods`.`report_count` AS `report_count`,`onlinetest`.`goods`.`collection_count` AS `collection_count`,`onlinetest`.`goods`.`remind_count` AS `remind_count`,`onlinetest`.`goods`.`view_count` AS `view_count`,`onlinetest`.`goods`.`u_id` AS `u_id`,`onlinetest`.`goods`.`create_time` AS `create_time`,`onlinetest`.`goods`.`update_time` AS `update_time`,`onlinetest`.`goods`.`base_collection_count` AS `base_collection_count`,`onlinetest`.`goods`.`gid` AS `gid`,`onlinetest`.`goods`.`auto_inc_id` AS `auto_inc_id`,`onlinetest`.`goods`.`sequence` AS `sequence`,`v_goods_category`.`name3` AS `name3`,`v_goods_category`.`id2` AS `id2`,`v_goods_category`.`name2` AS `name2`,`v_goods_category`.`id1` AS `id1`,`v_goods_category`.`name1` AS `name1`,`v_goods_category`.`id3` AS `id3`,`onlinetest`.`goods_brand`.`name` AS `b_name`,`onlinetest`.`company`.`name` AS `c_name` from (((`onlinetest`.`goods` join `onlinetest`.`v_goods_category` on((`onlinetest`.`goods`.`category` = `v_goods_category`.`id3`))) join `onlinetest`.`goods_brand` on((`onlinetest`.`goods`.`brand` = `onlinetest`.`goods_brand`.`id`))) join `onlinetest`.`company` on((`onlinetest`.`goods`.`comp_id` = `onlinetest`.`company`.`id`))) where (`onlinetest`.`goods`.`create_time` >= '2017-08-16');

DROP VIEW IF EXISTS `v_goods_for_tryout_report_view`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_goods_for_tryout_report_view` AS select `onlinetest`.`goods`.`id` AS `id`,`onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`goods`.`title_pic` AS `title_pic`,`onlinetest`.`goods`.`price` AS `price` from `onlinetest`.`goods`;

DROP VIEW IF EXISTS `v_goods_group_remind`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_goods_group_remind` AS select `onlinetest`.`goods_activity_remind`.`id` AS `id`,`onlinetest`.`goods_activity_remind`.`u_id` AS `u_id`,`onlinetest`.`goods_activity_remind`.`goodsid` AS `goodsid`,`onlinetest`.`goods_activity_remind`.`create_time` AS `create_time`,`onlinetest`.`goods_activity_remind`.`remind_count` AS `remind_count`,`onlinetest`.`goods_activity_remind`.`status` AS `status`,`onlinetest`.`group_buy`.`name` AS `name`,`onlinetest`.`group_buy`.`start_time` AS `g_start_time`,`onlinetest`.`member`.`username` AS `username` from ((`onlinetest`.`goods_activity_remind` join `onlinetest`.`group_buy` on(((`onlinetest`.`goods_activity_remind`.`goodsid` = `onlinetest`.`group_buy`.`goodsid`) and (`onlinetest`.`group_buy`.`status` = 3)))) join `onlinetest`.`member` on((`onlinetest`.`goods_activity_remind`.`u_id` = `onlinetest`.`member`.`id`)));

DROP VIEW IF EXISTS `v_goods_on_tags_group`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_goods_on_tags_group` AS select `v_goods_on_tags_for_group`.`goods_id` AS `goods_id`,group_concat(`v_goods_on_tags_for_group`.`tag_id`,',',`v_goods_on_tags_for_group`.`tag_name` order by `v_goods_on_tags_for_group`.`tag_id` ASC separator ',') AS `tags`,group_concat(`v_goods_on_tags_for_group`.`tag_id` order by `v_goods_on_tags_for_group`.`tag_id` ASC separator ',') AS `tag_ids`,group_concat(`v_goods_on_tags_for_group`.`tag_name` order by `v_goods_on_tags_for_group`.`tag_name` ASC separator ',') AS `tag_names` from `onlinetest`.`v_goods_on_tags_for_group` group by `v_goods_on_tags_for_group`.`goods_id`;

DROP VIEW IF EXISTS `v_goods_list`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_goods_list` AS select `onlinetest`.`goods`.`id` AS `id`,`onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`goods`.`code` AS `code`,`onlinetest`.`goods`.`title_pic` AS `title_pic`,`onlinetest`.`goods`.`banner_json` AS `banner_json`,`onlinetest`.`goods`.`details_json` AS `details_json`,`onlinetest`.`goods_brand`.`name` AS `brand_name`,`onlinetest`.`goods`.`start_time` AS `start_time`,`onlinetest`.`goods`.`end_time` AS `end_time`,`onlinetest`.`goods`.`speci_json` AS `speci_json`,`onlinetest`.`goods`.`amount` AS `amount`,`onlinetest`.`goods`.`price` AS `price`,`onlinetest`.`goods`.`sale_price` AS `sale_price`,`onlinetest`.`logistics`.`name` AS `delivery_name`,`onlinetest`.`goods`.`send_hour` AS `send_hour`,`onlinetest`.`goods`.`safeguard_json` AS `safeguard_json`,`onlinetest`.`goods`.`activity_json` AS `activity_json`,`onlinetest`.`goods`.`status` AS `status`,`onlinetest`.`goods`.`create_time` AS `create_time`,`onlinetest`.`goods`.`update_time` AS `update_time`,`onlinetest`.`company`.`name` AS `company_name`,`onlinetest`.`goods_brand`.`id` AS `brand_id`,`onlinetest`.`logistics`.`id` AS `delivery_id`,`v_goods_category`.`id3` AS `category3`,`v_goods_category`.`name3` AS `category_name3`,`v_goods_category`.`id2` AS `category2`,`v_goods_category`.`name2` AS `category_name2`,`v_goods_category`.`id1` AS `category1`,`v_goods_category`.`name1` AS `categroy_name1`,`onlinetest`.`goods`.`category` AS `category`,`onlinetest`.`goods`.`comp_id` AS `comp_id`,`onlinetest`.`goods`.`sale_count` AS `goods_sale_count`,`onlinetest`.`goods`.`collection_count` AS `collection_count`,`onlinetest`.`goods`.`report_count` AS `report_count`,`onlinetest`.`goods`.`trade_send` AS `trade_send`,`onlinetest`.`goods`.`hot_sell` AS `hot_sell`,`onlinetest`.`goods`.`base_sale_count` AS `goods_base_sale_count`,`onlinetest`.`goods`.`less_stock` AS `less_stock`,`onlinetest`.`goods`.`base_collection_count` AS `base_collection_count`,`onlinetest`.`goods`.`sequence` AS `sequence`,`v_goods_on_tags_group`.`tags` AS `tags`,`v_goods_on_tags_group`.`tag_ids` AS `tag_ids`,`v_goods_on_tags_group`.`tag_names` AS `tag_names`,(case `onlinetest`.`goods`.`status` when 4 then 4 when 99 then 99 else 0 end) AS `st` from (((((`onlinetest`.`goods` left join `onlinetest`.`goods_brand` on(((`onlinetest`.`goods`.`brand` = `onlinetest`.`goods_brand`.`id`) and (`onlinetest`.`goods`.`status` < 99)))) left join `onlinetest`.`company` on((`onlinetest`.`goods`.`comp_id` = `onlinetest`.`company`.`id`))) left join `onlinetest`.`v_goods_category` on((`onlinetest`.`goods`.`category` = `v_goods_category`.`id3`))) left join `onlinetest`.`logistics` on((`onlinetest`.`goods`.`delivery` = `onlinetest`.`logistics`.`id`))) left join `onlinetest`.`v_goods_on_tags_group` on((`onlinetest`.`goods`.`id` = `v_goods_on_tags_group`.`goods_id`)));

DROP VIEW IF EXISTS `v_goods_model_value`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_goods_model_value` AS select `onlinetest`.`goods_model`.`id` AS `id`,`onlinetest`.`goods_model`.`name` AS `name`,`onlinetest`.`goods_model_value`.`name` AS `value`,`onlinetest`.`goods_model_value`.`status` AS `status`,`onlinetest`.`goods_model_value`.`id` AS `valueid` from (`onlinetest`.`goods_model` join `onlinetest`.`goods_model_value` on((`onlinetest`.`goods_model`.`id` = `onlinetest`.`goods_model_value`.`model_id`)));

DROP VIEW IF EXISTS `v_goods_net`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_goods_net` AS select `onlinetest`.`goods`.`id` AS `id`,`onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`goods`.`comp_id` AS `comp_id`,`onlinetest`.`goods`.`title_pic` AS `title_pic`,`onlinetest`.`goods`.`banner_json` AS `banner_json`,`onlinetest`.`goods`.`details_json` AS `details_json`,`onlinetest`.`goods`.`brand` AS `brand`,`onlinetest`.`goods`.`category` AS `category`,`onlinetest`.`goods`.`start_time` AS `start_time`,`onlinetest`.`goods`.`end_time` AS `end_time`,`onlinetest`.`goods`.`speci_json` AS `speci_json`,`onlinetest`.`goods`.`amount` AS `amount`,`onlinetest`.`goods`.`price` AS `price`,`onlinetest`.`goods`.`sale_price` AS `sale_price`,`onlinetest`.`goods`.`delivery` AS `delivery`,`onlinetest`.`goods`.`send_hour` AS `send_hour`,`onlinetest`.`goods`.`safeguard_json` AS `safeguard_json`,`onlinetest`.`goods`.`activity_json` AS `activity_json`,`onlinetest`.`goods`.`hot_sell` AS `hot_sell`,`onlinetest`.`goods`.`less_stock` AS `less_stock`,`onlinetest`.`goods`.`trade_send` AS `trade_send`,`onlinetest`.`goods`.`status` AS `status`,`onlinetest`.`goods`.`create_time` AS `create_time`,`onlinetest`.`goods`.`update_time` AS `update_time`,`onlinetest`.`goods`.`sale_count` AS `sale_count`,`onlinetest`.`goods`.`report_count` AS `report_count`,`onlinetest`.`goods`.`collection_count` AS `collection_count`,`onlinetest`.`goods`.`remind_count` AS `remind_count`,`onlinetest`.`goods`.`view_count` AS `view_count` from `onlinetest`.`goods` where ((`onlinetest`.`goods`.`status` = 3) and isnull(`onlinetest`.`goods`.`activity_json`) and (not(`onlinetest`.`goods`.`id` in (select `onlinetest`.`points_mall_goods`.`ticket_id` from `onlinetest`.`points_mall_goods` where ((`onlinetest`.`points_mall_goods`.`category` = 2) and (`onlinetest`.`points_mall_goods`.`status` = 3))))));

DROP VIEW IF EXISTS `v_goods_net_tryout`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_goods_net_tryout` AS select `onlinetest`.`goods`.`id` AS `id`,`onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`goods`.`comp_id` AS `comp_id`,`onlinetest`.`goods`.`title_pic` AS `title_pic`,`onlinetest`.`goods`.`banner_json` AS `banner_json`,`onlinetest`.`goods`.`details_json` AS `details_json`,`onlinetest`.`goods`.`brand` AS `brand`,`onlinetest`.`goods`.`category` AS `category`,`onlinetest`.`goods`.`start_time` AS `start_time`,`onlinetest`.`goods`.`end_time` AS `end_time`,`onlinetest`.`goods`.`speci_json` AS `speci_json`,`onlinetest`.`goods`.`amount` AS `amount`,`onlinetest`.`goods`.`price` AS `price`,`onlinetest`.`goods`.`sale_price` AS `sale_price`,`onlinetest`.`goods`.`delivery` AS `delivery`,`onlinetest`.`goods`.`send_hour` AS `send_hour`,`onlinetest`.`goods`.`safeguard_json` AS `safeguard_json`,`onlinetest`.`goods`.`activity_json` AS `activity_json`,`onlinetest`.`goods`.`hot_sell` AS `hot_sell`,`onlinetest`.`goods`.`less_stock` AS `less_stock`,`onlinetest`.`goods`.`trade_send` AS `trade_send`,`onlinetest`.`goods`.`status` AS `status`,`onlinetest`.`goods`.`create_time` AS `create_time`,`onlinetest`.`goods`.`update_time` AS `update_time`,`onlinetest`.`goods`.`sale_count` AS `sale_count`,`onlinetest`.`goods`.`report_count` AS `report_count`,`onlinetest`.`goods`.`collection_count` AS `collection_count`,`onlinetest`.`goods`.`remind_count` AS `remind_count`,`onlinetest`.`goods`.`view_count` AS `view_count` from `onlinetest`.`goods` where ((`onlinetest`.`goods`.`status` = 3) and (not(`onlinetest`.`goods`.`id` in (select `onlinetest`.`tryout`.`goodsid` from `onlinetest`.`tryout` where (`onlinetest`.`tryout`.`status` = 3)))));

DROP VIEW IF EXISTS `v_goods_on_tags`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_goods_on_tags` AS select `onlinetest`.`goods_on_tags`.`id` AS `id`,`onlinetest`.`goods_on_tags`.`goods_id` AS `goods_id`,`onlinetest`.`goods_on_tags`.`tag_id` AS `tag_id`,`onlinetest`.`goods_on_tags`.`status` AS `status`,`onlinetest`.`goods_tag`.`tag_name` AS `tag_name`,`onlinetest`.`goods_tag`.`tag_group` AS `tag_group`,`onlinetest`.`goods_tag`.`tag_type` AS `tag_type`,`onlinetest`.`goods_tag`.`picpath` AS `picpath`,`v_goods_on_tags_group`.`tag_ids` AS `tag_ids`,`v_goods_on_tags_group`.`tag_names` AS `tag_names` from ((`onlinetest`.`goods_on_tags` join `onlinetest`.`goods_tag` on((`onlinetest`.`goods_on_tags`.`tag_id` = `onlinetest`.`goods_tag`.`id`))) join `onlinetest`.`v_goods_on_tags_group` on((`onlinetest`.`goods_on_tags`.`goods_id` = `v_goods_on_tags_group`.`goods_id`)));

DROP VIEW IF EXISTS `v_goods_tag_category`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_goods_tag_category` AS select `onlinetest`.`goods_tag`.`id` AS `id`,`onlinetest`.`goods_tag`.`tag_name` AS `tag_name`,`onlinetest`.`goods_tag`.`tag_group` AS `tag_group`,`onlinetest`.`goods_tag`.`tag_type` AS `tag_type`,`onlinetest`.`goods_tag`.`picpath` AS `picpath`,`onlinetest`.`goods_tag`.`create_time` AS `create_time`,`onlinetest`.`goods_category`.`name` AS `category_name`,`onlinetest`.`goods_category`.`id` AS `category_id`,`onlinetest`.`goods_category`.`adv_pic` AS `adv_pic`,`onlinetest`.`goods_category`.`adv_title` AS `adv_title`,`onlinetest`.`goods_tag`.`order_code` AS `order_code` from (`onlinetest`.`goods_tag` join `onlinetest`.`goods_category` on((`onlinetest`.`goods_tag`.`tag_type` = `onlinetest`.`goods_category`.`id`)));

DROP VIEW IF EXISTS `v_grab_buy`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_grab_buy` AS select `onlinetest`.`grab_buy`.`id` AS `id`,`onlinetest`.`grab_buy`.`batch_number` AS `batch_number`,`onlinetest`.`grab_buy`.`sale_price` AS `sale_price`,`onlinetest`.`grab_buy`.`amount` AS `amount`,`onlinetest`.`grab_buy`.`small_price` AS `small_price`,`onlinetest`.`grab_buy`.`goodsid` AS `goodsid`,`onlinetest`.`grab_buy`.`speci_json` AS `speci_json`,`onlinetest`.`grab_buy`.`start_time` AS `start_time`,`onlinetest`.`grab_buy`.`end_time` AS `end_time`,`onlinetest`.`grab_buy`.`status` AS `status`,`onlinetest`.`grab_buy`.`sequence` AS `sequence`,`onlinetest`.`grab_buy`.`sale_count` AS `sale_count`,`onlinetest`.`grab_buy`.`base_sale_count` AS `base_sale_count`,`onlinetest`.`grab_buy`.`create_time` AS `create_time`,`onlinetest`.`grab_buy`.`update_time` AS `update_time`,`onlinetest`.`grab_buy`.`title_pic` AS `title_pic`,`onlinetest`.`goods`.`status` AS `gstatus`,`onlinetest`.`goods`.`price` AS `price`,`onlinetest`.`goods`.`name` AS `goodsname`,`onlinetest`.`grab_buy`.`name` AS `name`,`onlinetest`.`goods`.`comp_id` AS `comp_id`,(case `onlinetest`.`grab_buy`.`status` when 4 then 4 when 99 then 99 else 0 end) AS `st` from (`onlinetest`.`grab_buy` join `onlinetest`.`goods` on((`onlinetest`.`grab_buy`.`goodsid` = `onlinetest`.`goods`.`id`)));

DROP VIEW IF EXISTS `v_group_buy_for_talent`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_group_buy_for_talent` AS select `onlinetest`.`group_buy`.`id` AS `id`,`onlinetest`.`group_buy`.`picpath` AS `picpath`,`onlinetest`.`group_buy`.`remark` AS `remark`,`onlinetest`.`group_buy`.`category` AS `category`,`onlinetest`.`group_buy`.`start_time` AS `start_time`,`onlinetest`.`group_buy`.`end_time` AS `end_time`,`onlinetest`.`group_buy`.`goodsid` AS `goodsid`,`onlinetest`.`group_buy`.`speci_json` AS `speci_json`,`onlinetest`.`group_buy`.`sale_price` AS `sale_price`,`onlinetest`.`group_buy`.`small_price` AS `small_price`,`onlinetest`.`group_buy`.`amount` AS `amount`,`onlinetest`.`group_buy`.`sale_count` AS `sale_count`,`onlinetest`.`group_buy`.`base_sale_count` AS `base_sale_count`,`onlinetest`.`group_buy`.`sequence` AS `sequence`,`onlinetest`.`group_buy`.`brokerage_type` AS `brokerage_type`,`onlinetest`.`group_buy`.`brokerage_price` AS `brokerage_price`,`onlinetest`.`group_buy`.`status` AS `status`,`onlinetest`.`group_buy`.`create_time` AS `create_time`,`onlinetest`.`group_buy`.`update_time` AS `update_time`,`onlinetest`.`goods`.`name` AS `name` from (`onlinetest`.`group_buy` join `onlinetest`.`goods` on((`onlinetest`.`group_buy`.`goodsid` = `onlinetest`.`goods`.`id`))) where (`onlinetest`.`group_buy`.`category` = 1);

DROP VIEW IF EXISTS `v_group_buy_goods_commit`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_group_buy_goods_commit` AS select `onlinetest`.`group_buy_goods_commit`.`id` AS `id`,`onlinetest`.`group_buy_goods_commit`.`u_id` AS `u_id`,`onlinetest`.`group_buy_goods_commit`.`goods_name` AS `goods_name`,`onlinetest`.`group_buy_goods_commit`.`taobao_link` AS `taobao_link`,`onlinetest`.`group_buy_goods_commit`.`pic_json` AS `pic_json`,`onlinetest`.`group_buy_goods_commit`.`min_price` AS `min_price`,`onlinetest`.`group_buy_goods_commit`.`max_price` AS `max_price`,`onlinetest`.`group_buy_goods_commit`.`sale_count` AS `sale_count`,`onlinetest`.`group_buy_goods_commit`.`create_time` AS `create_time`,`onlinetest`.`member`.`nickname` AS `nickname` from (`onlinetest`.`group_buy_goods_commit` join `onlinetest`.`member` on((`onlinetest`.`group_buy_goods_commit`.`u_id` = `onlinetest`.`member`.`id`)));

DROP VIEW IF EXISTS `v_group_buy_list`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_group_buy_list` AS select `onlinetest`.`group_buy`.`id` AS `id`,`onlinetest`.`group_buy`.`picpath` AS `picpath`,`onlinetest`.`group_buy`.`name` AS `name`,`onlinetest`.`group_buy`.`remark` AS `remark`,`onlinetest`.`group_buy`.`category` AS `category`,`onlinetest`.`group_buy`.`start_time` AS `start_time`,`onlinetest`.`group_buy`.`end_time` AS `end_time`,`onlinetest`.`group_buy`.`goodsid` AS `goodsid`,`onlinetest`.`group_buy`.`speci_json` AS `speci_json`,`onlinetest`.`group_buy`.`sale_price` AS `sale_price`,`onlinetest`.`group_buy`.`small_price` AS `small_price`,`onlinetest`.`group_buy`.`sale_count` AS `sale_count`,`onlinetest`.`group_buy`.`amount` AS `amount`,`onlinetest`.`group_buy`.`base_sale_count` AS `base_sale_count`,`onlinetest`.`group_buy`.`sequence` AS `sequence`,`onlinetest`.`group_buy`.`brokerage_type` AS `brokerage_type`,`onlinetest`.`group_buy`.`brokerage_price` AS `brokerage_price`,`onlinetest`.`group_buy`.`status` AS `status`,`onlinetest`.`group_buy`.`create_time` AS `create_time`,`onlinetest`.`group_buy`.`update_time` AS `update_time`,`onlinetest`.`goods`.`name` AS `goodsname`,`onlinetest`.`goods`.`status` AS `gstatus`,`onlinetest`.`goods`.`comp_id` AS `comp_id`,(case `onlinetest`.`group_buy`.`status` when 4 then 4 when 99 then 99 else 0 end) AS `st` from (`onlinetest`.`group_buy` join `onlinetest`.`goods` on((`onlinetest`.`group_buy`.`goodsid` = `onlinetest`.`goods`.`id`)));

DROP VIEW IF EXISTS `v_group_buy_topic`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_group_buy_topic` AS select `onlinetest`.`group_buy_topic_goods`.`id` AS `id`,`onlinetest`.`group_buy_topic_goods`.`goods_id` AS `goods_id`,`onlinetest`.`group_buy_topic_goods`.`topic_id` AS `topic_id`,`onlinetest`.`goods`.`title_pic` AS `title_pic`,`onlinetest`.`goods`.`status` AS `status`,`onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`goods`.`price` AS `price`,`onlinetest`.`goods`.`sale_price` AS `sale_price`,`onlinetest`.`goods`.`sale_count` AS `sale_count`,`onlinetest`.`goods`.`base_sale_count` AS `base_sale_count`,`onlinetest`.`group_buy_topic_goods`.`u_id` AS `u_id`,`onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`member`.`picpath` AS `picpath`,`onlinetest`.`member`.`level` AS `level`,`onlinetest`.`goods`.`activity_json` AS `activity_json`,`onlinetest`.`member`.`feeling` AS `feeling` from ((`onlinetest`.`group_buy_topic_goods` join `onlinetest`.`goods` on((`onlinetest`.`group_buy_topic_goods`.`goods_id` = `onlinetest`.`goods`.`id`))) join `onlinetest`.`member` on((`onlinetest`.`group_buy_topic_goods`.`u_id` = `onlinetest`.`member`.`id`))) where (`onlinetest`.`goods`.`status` = 3);

DROP VIEW IF EXISTS `v_group_buy_topic_goods`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_group_buy_topic_goods` AS select `onlinetest`.`group_buy_topic_goods`.`id` AS `id`,`onlinetest`.`group_buy_topic_goods`.`goods_id` AS `goods_id`,`onlinetest`.`group_buy_topic_goods`.`group_buy_id` AS `group_buy_id`,`onlinetest`.`group_buy_topic_goods`.`topic_id` AS `topic_id`,`onlinetest`.`goods`.`title_pic` AS `title_pic`,`onlinetest`.`group_buy`.`start_time` AS `start_time`,`onlinetest`.`group_buy`.`end_time` AS `end_time`,`onlinetest`.`goods`.`status` AS `status`,`onlinetest`.`goods`.`activity_json` AS `activity_json` from ((`onlinetest`.`group_buy_topic_goods` join `onlinetest`.`goods` on((`onlinetest`.`group_buy_topic_goods`.`goods_id` = `onlinetest`.`goods`.`id`))) join `onlinetest`.`group_buy` on((`onlinetest`.`group_buy_topic_goods`.`group_buy_id` = `onlinetest`.`group_buy`.`id`))) where (`onlinetest`.`goods`.`status` = 3);

DROP VIEW IF EXISTS `v_group_buy_topic_manager`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_group_buy_topic_manager` AS select `onlinetest`.`group_buy_topic`.`id` AS `id`,`onlinetest`.`group_buy_topic`.`css_type` AS `css_type`,`onlinetest`.`group_buy_topic`.`u_id` AS `u_id`,`onlinetest`.`group_buy_topic`.`view_count` AS `view_count`,`onlinetest`.`group_buy_topic`.`create_time` AS `create_time`,`onlinetest`.`member`.`username` AS `username`,`onlinetest`.`member`.`nickname` AS `nickname` from (`onlinetest`.`group_buy_topic` join `onlinetest`.`member` on((`onlinetest`.`group_buy_topic`.`u_id` = `onlinetest`.`member`.`id`)));

DROP VIEW IF EXISTS `v_helpdoc_typeid`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_helpdoc_typeid` AS select `onlinetest`.`help_doc`.`id` AS `id`,`onlinetest`.`help_doc`.`title` AS `title` from `onlinetest`.`help_doc` where (`onlinetest`.`help_doc`.`status` = 1);

DROP VIEW IF EXISTS `v_her_plan_list`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_her_plan_list` AS select `onlinetest`.`her_plan`.`id` AS `id`,`onlinetest`.`her_plan`.`content` AS `content`,`onlinetest`.`her_plan`.`picpath` AS `picpath`,`onlinetest`.`her_plan`.`linkurl` AS `linkurl`,`onlinetest`.`her_plan`.`uid` AS `uid`,`onlinetest`.`her_plan`.`person_picpath` AS `person_picpath`,`onlinetest`.`her_plan`.`person_name` AS `person_name`,`onlinetest`.`her_plan`.`person_summary` AS `person_summary`,`onlinetest`.`her_plan`.`show_main_page` AS `show_main_page`,`onlinetest`.`her_plan`.`status` AS `status`,`onlinetest`.`her_plan`.`create_time` AS `create_time`,`onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`member`.`feeling` AS `feeling`,`onlinetest`.`member`.`picpath` AS `m_picpath`,`onlinetest`.`her_plan`.`sequence` AS `sequence`,`onlinetest`.`member`.`username` AS `username`,`onlinetest`.`her_plan`.`summery` AS `summery` from (`onlinetest`.`her_plan` left join `onlinetest`.`member` on(((`onlinetest`.`member`.`id` = `onlinetest`.`her_plan`.`uid`) and (`onlinetest`.`her_plan`.`status` < 99))));

DROP VIEW IF EXISTS `v_import_st`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_import_st` AS select `v_goods_list`.`name` AS `name`,`v_goods_list`.`price` AS `price`,`v_goods_list`.`category_name3` AS `category_name3`,`onlinetest`.`talent_import_fans`.`create_time` AS `create_time`,`onlinetest`.`talent_import_fans`.`goodsid` AS `goodsid` from (`onlinetest`.`talent_import_fans` join `onlinetest`.`v_goods_list` on((`onlinetest`.`talent_import_fans`.`goodsid` = `v_goods_list`.`id`)));

DROP VIEW IF EXISTS `v_log_goods_visit_history`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_log_goods_visit_history` AS select `onlinetest`.`log_goods_visit_history`.`id` AS `id`,`onlinetest`.`log_goods_visit_history`.`u_id` AS `u_id`,`onlinetest`.`log_goods_visit_history`.`goodsid` AS `goodsid`,`onlinetest`.`log_goods_visit_history`.`status` AS `status`,`onlinetest`.`log_goods_visit_history`.`create_time` AS `create_time`,`onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`goods`.`sale_price` AS `sale_price`,`onlinetest`.`goods`.`price` AS `price`,`onlinetest`.`goods`.`title_pic` AS `title_pic` from (`onlinetest`.`log_goods_visit_history` join `onlinetest`.`goods` on((`onlinetest`.`log_goods_visit_history`.`goodsid` = `onlinetest`.`goods`.`id`))) where (`onlinetest`.`log_goods_visit_history`.`status` = 0);

DROP VIEW IF EXISTS `v_log_points_mall`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_log_points_mall` AS select `onlinetest`.`log_points_mall`.`id` AS `id`,`onlinetest`.`log_points_mall`.`u_id` AS `u_id`,`onlinetest`.`log_points_mall`.`ticketid` AS `ticketid`,`onlinetest`.`log_points_mall`.`ticket_points` AS `ticket_points`,`onlinetest`.`log_points_mall`.`fire_member_points` AS `fire_member_points`,`onlinetest`.`log_points_mall`.`create_time` AS `create_time`,`onlinetest`.`ticket`.`name` AS `ticket_name`,`onlinetest`.`member`.`points` AS `points`,`onlinetest`.`member`.`username` AS `username`,`onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`ticket`.`picurl` AS `picurl` from ((`onlinetest`.`log_points_mall` join `onlinetest`.`ticket` on((`onlinetest`.`log_points_mall`.`ticketid` = `onlinetest`.`ticket`.`id`))) join `onlinetest`.`member` on((`onlinetest`.`log_points_mall`.`u_id` = `onlinetest`.`member`.`id`)));

DROP VIEW IF EXISTS `v_log_tryout_report_visit_history`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_log_tryout_report_visit_history` AS select `onlinetest`.`log_tryout_report_visit_history`.`create_time` AS `create_time`,`onlinetest`.`log_tryout_report_visit_history`.`id` AS `id`,`onlinetest`.`log_tryout_report_visit_history`.`u_id` AS `u_id`,`onlinetest`.`log_tryout_report_visit_history`.`reportid` AS `reportid`,`onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`member`.`username` AS `username` from (`onlinetest`.`log_tryout_report_visit_history` join `onlinetest`.`member` on((`onlinetest`.`log_tryout_report_visit_history`.`u_id` = `onlinetest`.`member`.`id`)));

DROP VIEW IF EXISTS `v_logistics_cost_list`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_logistics_cost_list` AS select `onlinetest`.`city_zone`.`name` AS `name`,`onlinetest`.`logistics_cost`.`id` AS `id`,`onlinetest`.`logistics_cost`.`cost` AS `cost`,`onlinetest`.`logistics_cost`.`status` AS `status`,`onlinetest`.`logistics_cost`.`province_id` AS `province_id` from (`onlinetest`.`city_zone` join `onlinetest`.`logistics_cost` on((`onlinetest`.`logistics_cost`.`province_id` = `onlinetest`.`city_zone`.`id`)));

DROP VIEW IF EXISTS `v_main_cfg_her_plan`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_main_cfg_her_plan` AS select `onlinetest`.`her_plan`.`id` AS `id`,`onlinetest`.`her_plan`.`content` AS `content`,`onlinetest`.`her_plan`.`picpath` AS `picpath`,`onlinetest`.`her_plan`.`linkurl` AS `linkurl`,`onlinetest`.`her_plan`.`uid` AS `uid`,`onlinetest`.`her_plan`.`person_picpath` AS `person_picpath`,`onlinetest`.`her_plan`.`person_name` AS `person_name`,`onlinetest`.`her_plan`.`person_summary` AS `person_summary`,`onlinetest`.`her_plan`.`show_main_page` AS `show_main_page`,`onlinetest`.`her_plan`.`status` AS `status`,`onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`member`.`picpath` AS `m_picpath`,`onlinetest`.`member`.`feeling` AS `feeling`,`onlinetest`.`her_plan`.`summery` AS `summery` from (`onlinetest`.`her_plan` left join `onlinetest`.`member` on((`onlinetest`.`her_plan`.`uid` = `onlinetest`.`member`.`id`))) where ((`onlinetest`.`her_plan`.`show_main_page` = 1) and (`onlinetest`.`her_plan`.`status` = 1));

DROP VIEW IF EXISTS `v_main_cfg_hot_list`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_main_cfg_hot_list` AS select `onlinetest`.`main_cfg_hot_class`.`id` AS `id`,`onlinetest`.`main_cfg_hot_class`.`goods_category_id` AS `goods_category_id`,`onlinetest`.`main_cfg_hot_class`.`sequence` AS `sequence`,`onlinetest`.`main_cfg_hot_class`.`picurl` AS `picurl`,`onlinetest`.`main_cfg_hot_class`.`status` AS `status`,`onlinetest`.`goods_category`.`name` AS `name`,`onlinetest`.`goods_category`.`pid` AS `pid`,`onlinetest`.`goods_category`.`id` AS `cid` from (`onlinetest`.`main_cfg_hot_class` join `onlinetest`.`goods_category` on((`onlinetest`.`goods_category`.`id` = `onlinetest`.`main_cfg_hot_class`.`goods_category_id`)));

DROP VIEW IF EXISTS `v_main_no_recommend_group_goods`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_main_no_recommend_group_goods` AS select `onlinetest`.`group_buy`.`id` AS `id`,`onlinetest`.`group_buy`.`goodsid` AS `goodsid`,0 AS `recommend_id`,0 AS `talent_id`,0 AS `tryout_report_id`,'' AS `tryout_report_content`,0 AS `sequence`,`onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`goods`.`title_pic` AS `title_pic`,`onlinetest`.`goods`.`price` AS `price`,`onlinetest`.`goods`.`sale_price` AS `sale_price`,`onlinetest`.`goods`.`sale_count` AS `goods_sale_count`,`onlinetest`.`goods`.`base_sale_count` AS `goods_base_sale_count`,'' AS `title`,`onlinetest`.`group_buy`.`picpath` AS `picpath`,`onlinetest`.`group_buy`.`end_time` AS `group_end_time`,`onlinetest`.`group_buy`.`start_time` AS `group_start_time`,`onlinetest`.`group_buy`.`sale_count` AS `group_sale_count`,`onlinetest`.`group_buy`.`base_sale_count` AS `base_group_sale_count`,`onlinetest`.`group_buy`.`sale_price` AS `group_sale_price`,`onlinetest`.`group_buy`.`small_price` AS `small_price`,'' AS `nickname`,'' AS `member_picpath`,'' AS `feeling`,`onlinetest`.`group_buy`.`id` AS `group_buy_id`,1 AS `gsequence` from (`onlinetest`.`group_buy` join `onlinetest`.`goods` on(((`onlinetest`.`group_buy`.`goodsid` = `onlinetest`.`goods`.`id`) and (`onlinetest`.`goods`.`status` = 3)))) where ((`onlinetest`.`group_buy`.`end_time` >= now()) and ((`onlinetest`.`group_buy`.`status` = 3) or isnull(`onlinetest`.`group_buy`.`status`)) and (not(`onlinetest`.`group_buy`.`id` in (select `onlinetest`.`main_cfg_recommend`.`group_buy_id` from `onlinetest`.`main_cfg_recommend` where ((`onlinetest`.`main_cfg_recommend`.`status` = 1) and (`onlinetest`.`main_cfg_recommend`.`group_buy_id` <> '0')))))) order by `onlinetest`.`group_buy`.`start_time`;

DROP VIEW IF EXISTS `v_main_recommend_goods`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_main_recommend_goods` AS select 0 AS `id`,`onlinetest`.`main_cfg_recommend`.`goodsid` AS `goodsid`,`onlinetest`.`main_cfg_recommend`.`id` AS `recommend_id`,`onlinetest`.`main_cfg_recommend`.`talent_id` AS `talent_id`,`onlinetest`.`main_cfg_recommend`.`tryout_report_id` AS `tryout_report_id`,`onlinetest`.`main_cfg_recommend`.`tryout_report_content` AS `tryout_report_content`,`onlinetest`.`main_cfg_recommend`.`sequence` AS `sequence`,`onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`goods`.`title_pic` AS `title_pic`,`onlinetest`.`goods`.`price` AS `price`,`onlinetest`.`goods`.`sale_price` AS `sale_price`,`onlinetest`.`goods`.`sale_count` AS `goods_sale_count`,`onlinetest`.`goods`.`base_sale_count` AS `goods_base_sale_count`,`onlinetest`.`tryout_report`.`title` AS `title`,NULL AS `picpath`,NULL AS `group_end_time`,NULL AS `group_start_time`,0 AS `group_sale_count`,0 AS `base_group_sale_count`,0 AS `group_sale_price`,0 AS `small_price`,`onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`member`.`picpath` AS `member_picpath`,`onlinetest`.`member`.`feeling` AS `feeling`,`onlinetest`.`main_cfg_recommend`.`group_buy_id` AS `group_buy_id`,0 AS `gsequence`,`onlinetest`.`main_cfg_recommend`.`status` AS `main_status`,`onlinetest`.`goods`.`status` AS `status` from (((`onlinetest`.`main_cfg_recommend` join `onlinetest`.`goods` on(((`onlinetest`.`main_cfg_recommend`.`goodsid` = `onlinetest`.`goods`.`id`) and (`onlinetest`.`goods`.`status` = 3)))) left join `onlinetest`.`tryout_report` on(((`onlinetest`.`main_cfg_recommend`.`tryout_report_id` = `onlinetest`.`tryout_report`.`id`) and (`onlinetest`.`tryout_report`.`status` = 3)))) left join `onlinetest`.`member` on((`onlinetest`.`main_cfg_recommend`.`talent_id` = `onlinetest`.`member`.`id`))) where (((`onlinetest`.`main_cfg_recommend`.`group_buy_id` = '0') or isnull(`onlinetest`.`main_cfg_recommend`.`group_buy_id`)) and (`onlinetest`.`main_cfg_recommend`.`status` = 1));

DROP VIEW IF EXISTS `v_main_recommend_group_goods`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_main_recommend_group_goods` AS select `onlinetest`.`group_buy`.`id` AS `id`,`onlinetest`.`group_buy`.`goodsid` AS `goodsid`,`onlinetest`.`main_cfg_recommend`.`id` AS `recommend_id`,`onlinetest`.`main_cfg_recommend`.`talent_id` AS `talent_id`,`onlinetest`.`main_cfg_recommend`.`tryout_report_id` AS `tryout_report_id`,`onlinetest`.`main_cfg_recommend`.`tryout_report_content` AS `tryout_report_content`,`onlinetest`.`main_cfg_recommend`.`sequence` AS `sequence`,`onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`goods`.`title_pic` AS `title_pic`,`onlinetest`.`goods`.`price` AS `price`,`onlinetest`.`goods`.`sale_price` AS `sale_price`,`onlinetest`.`goods`.`sale_count` AS `goods_sale_count`,`onlinetest`.`goods`.`base_sale_count` AS `goods_base_sale_count`,`onlinetest`.`tryout_report`.`title` AS `title`,`onlinetest`.`group_buy`.`picpath` AS `picpath`,`onlinetest`.`group_buy`.`end_time` AS `group_end_time`,`onlinetest`.`group_buy`.`start_time` AS `group_start_time`,`onlinetest`.`group_buy`.`sale_count` AS `group_sale_count`,`onlinetest`.`group_buy`.`base_sale_count` AS `base_group_sale_count`,`onlinetest`.`group_buy`.`sale_price` AS `group_sale_price`,`onlinetest`.`group_buy`.`small_price` AS `small_price`,`onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`member`.`picpath` AS `member_picpath`,`onlinetest`.`member`.`feeling` AS `feeling`,`onlinetest`.`group_buy`.`id` AS `group_buy_id`,2 AS `gsequence` from ((((`onlinetest`.`group_buy` join `onlinetest`.`goods` on(((`onlinetest`.`group_buy`.`goodsid` = `onlinetest`.`goods`.`id`) and (`onlinetest`.`goods`.`status` = 3)))) join `onlinetest`.`main_cfg_recommend` on(((`onlinetest`.`main_cfg_recommend`.`group_buy_id` = `onlinetest`.`group_buy`.`id`) and (`onlinetest`.`main_cfg_recommend`.`status` = 1)))) left join `onlinetest`.`tryout_report` on(((`onlinetest`.`main_cfg_recommend`.`tryout_report_id` = `onlinetest`.`tryout_report`.`id`) and (`onlinetest`.`tryout_report`.`status` = 3)))) left join `onlinetest`.`member` on((`onlinetest`.`main_cfg_recommend`.`talent_id` = `onlinetest`.`member`.`id`))) where ((`onlinetest`.`group_buy`.`end_time` >= now()) and ((`onlinetest`.`group_buy`.`status` = 3) or isnull(`onlinetest`.`group_buy`.`status`)));

DROP VIEW IF EXISTS `v_main_cfg_recommend`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_main_cfg_recommend` AS select `v_main_recommend_group_goods`.`id` AS `id`,`v_main_recommend_group_goods`.`goodsid` AS `goodsid`,`v_main_recommend_group_goods`.`recommend_id` AS `recommend_id`,`v_main_recommend_group_goods`.`talent_id` AS `talent_id`,`v_main_recommend_group_goods`.`tryout_report_id` AS `tryout_report_id`,`v_main_recommend_group_goods`.`tryout_report_content` AS `tryout_report_content`,`v_main_recommend_group_goods`.`sequence` AS `sequence`,`v_main_recommend_group_goods`.`name` AS `name`,`v_main_recommend_group_goods`.`title_pic` AS `title_pic`,`v_main_recommend_group_goods`.`price` AS `price`,`v_main_recommend_group_goods`.`sale_price` AS `sale_price`,`v_main_recommend_group_goods`.`goods_sale_count` AS `goods_sale_count`,`v_main_recommend_group_goods`.`goods_base_sale_count` AS `goods_base_sale_count`,`v_main_recommend_group_goods`.`title` AS `title`,`v_main_recommend_group_goods`.`picpath` AS `picpath`,`v_main_recommend_group_goods`.`group_end_time` AS `group_end_time`,`v_main_recommend_group_goods`.`group_start_time` AS `group_start_time`,`v_main_recommend_group_goods`.`group_sale_count` AS `group_sale_count`,`v_main_recommend_group_goods`.`base_group_sale_count` AS `base_group_sale_count`,`v_main_recommend_group_goods`.`group_sale_price` AS `group_sale_price`,`v_main_recommend_group_goods`.`small_price` AS `small_price`,`v_main_recommend_group_goods`.`nickname` AS `nickname`,`v_main_recommend_group_goods`.`member_picpath` AS `member_picpath`,`v_main_recommend_group_goods`.`feeling` AS `feeling`,`v_main_recommend_group_goods`.`group_buy_id` AS `group_buy_id`,`v_main_recommend_group_goods`.`gsequence` AS `gsequence` from `onlinetest`.`v_main_recommend_group_goods` union all select `v_main_no_recommend_group_goods`.`id` AS `id`,`v_main_no_recommend_group_goods`.`goodsid` AS `goodsid`,`v_main_no_recommend_group_goods`.`recommend_id` AS `recommend_id`,`v_main_no_recommend_group_goods`.`talent_id` AS `talent_id`,`v_main_no_recommend_group_goods`.`tryout_report_id` AS `tryout_report_id`,`v_main_no_recommend_group_goods`.`tryout_report_content` AS `tryout_report_content`,`v_main_no_recommend_group_goods`.`sequence` AS `sequence`,`v_main_no_recommend_group_goods`.`name` AS `name`,`v_main_no_recommend_group_goods`.`title_pic` AS `title_pic`,`v_main_no_recommend_group_goods`.`price` AS `price`,`v_main_no_recommend_group_goods`.`sale_price` AS `sale_price`,`v_main_no_recommend_group_goods`.`goods_sale_count` AS `goods_sale_count`,`v_main_no_recommend_group_goods`.`goods_base_sale_count` AS `goods_base_sale_count`,`v_main_no_recommend_group_goods`.`title` AS `title`,`v_main_no_recommend_group_goods`.`picpath` AS `picpath`,`v_main_no_recommend_group_goods`.`group_end_time` AS `group_end_time`,`v_main_no_recommend_group_goods`.`group_start_time` AS `group_start_time`,`v_main_no_recommend_group_goods`.`group_sale_count` AS `group_sale_count`,`v_main_no_recommend_group_goods`.`base_group_sale_count` AS `base_group_sale_count`,`v_main_no_recommend_group_goods`.`group_sale_price` AS `group_sale_price`,`v_main_no_recommend_group_goods`.`small_price` AS `small_price`,`v_main_no_recommend_group_goods`.`nickname` AS `nickname`,`v_main_no_recommend_group_goods`.`member_picpath` AS `member_picpath`,`v_main_no_recommend_group_goods`.`feeling` AS `feeling`,`v_main_no_recommend_group_goods`.`group_buy_id` AS `group_buy_id`,`v_main_no_recommend_group_goods`.`gsequence` AS `gsequence` from `onlinetest`.`v_main_no_recommend_group_goods` union all select `v_main_recommend_goods`.`id` AS `id`,`v_main_recommend_goods`.`goodsid` AS `goodsid`,`v_main_recommend_goods`.`recommend_id` AS `recommend_id`,`v_main_recommend_goods`.`talent_id` AS `talent_id`,`v_main_recommend_goods`.`tryout_report_id` AS `tryout_report_id`,`v_main_recommend_goods`.`tryout_report_content` AS `tryout_report_content`,`v_main_recommend_goods`.`sequence` AS `sequence`,`v_main_recommend_goods`.`name` AS `name`,`v_main_recommend_goods`.`title_pic` AS `title_pic`,`v_main_recommend_goods`.`price` AS `price`,`v_main_recommend_goods`.`sale_price` AS `sale_price`,`v_main_recommend_goods`.`goods_sale_count` AS `goods_sale_count`,`v_main_recommend_goods`.`goods_base_sale_count` AS `goods_base_sale_count`,`v_main_recommend_goods`.`title` AS `title`,`v_main_recommend_goods`.`picpath` AS `picpath`,`v_main_recommend_goods`.`group_end_time` AS `group_end_time`,`v_main_recommend_goods`.`group_start_time` AS `group_start_time`,`v_main_recommend_goods`.`group_sale_count` AS `group_sale_count`,`v_main_recommend_goods`.`base_group_sale_count` AS `base_group_sale_count`,`v_main_recommend_goods`.`group_sale_price` AS `group_sale_price`,`v_main_recommend_goods`.`small_price` AS `small_price`,`v_main_recommend_goods`.`nickname` AS `nickname`,`v_main_recommend_goods`.`member_picpath` AS `member_picpath`,`v_main_recommend_goods`.`feeling` AS `feeling`,`v_main_recommend_goods`.`group_buy_id` AS `group_buy_id`,`v_main_recommend_goods`.`gsequence` AS `gsequence` from `onlinetest`.`v_main_recommend_goods`;

DROP VIEW IF EXISTS `v_main_cfg_recommend_copy`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_main_cfg_recommend_copy` AS select `v_main_recommend_group_goods`.`id` AS `id`,`v_main_recommend_group_goods`.`goodsid` AS `goodsid`,`v_main_recommend_group_goods`.`recommend_id` AS `recommend_id`,`v_main_recommend_group_goods`.`talent_id` AS `talent_id`,`v_main_recommend_group_goods`.`tryout_report_id` AS `tryout_report_id`,`v_main_recommend_group_goods`.`tryout_report_content` AS `tryout_report_content`,`v_main_recommend_group_goods`.`sequence` AS `sequence`,`v_main_recommend_group_goods`.`name` AS `name`,`v_main_recommend_group_goods`.`title_pic` AS `title_pic`,`v_main_recommend_group_goods`.`price` AS `price`,`v_main_recommend_group_goods`.`sale_price` AS `sale_price`,`v_main_recommend_group_goods`.`goods_sale_count` AS `goods_sale_count`,`v_main_recommend_group_goods`.`goods_base_sale_count` AS `goods_base_sale_count`,`v_main_recommend_group_goods`.`title` AS `title`,`v_main_recommend_group_goods`.`picpath` AS `picpath`,`v_main_recommend_group_goods`.`group_end_time` AS `group_end_time`,`v_main_recommend_group_goods`.`group_start_time` AS `group_start_time`,`v_main_recommend_group_goods`.`group_sale_count` AS `group_sale_count`,`v_main_recommend_group_goods`.`base_group_sale_count` AS `base_group_sale_count`,`v_main_recommend_group_goods`.`group_sale_price` AS `group_sale_price`,`v_main_recommend_group_goods`.`small_price` AS `small_price`,`v_main_recommend_group_goods`.`nickname` AS `nickname`,`v_main_recommend_group_goods`.`member_picpath` AS `member_picpath`,`v_main_recommend_group_goods`.`feeling` AS `feeling`,`v_main_recommend_group_goods`.`group_buy_id` AS `group_buy_id`,`v_main_recommend_group_goods`.`gsequence` AS `gsequence` from `onlinetest`.`v_main_recommend_group_goods` union all select `v_main_no_recommend_group_goods`.`id` AS `id`,`v_main_no_recommend_group_goods`.`goodsid` AS `goodsid`,`v_main_no_recommend_group_goods`.`recommend_id` AS `recommend_id`,`v_main_no_recommend_group_goods`.`talent_id` AS `talent_id`,`v_main_no_recommend_group_goods`.`tryout_report_id` AS `tryout_report_id`,`v_main_no_recommend_group_goods`.`tryout_report_content` AS `tryout_report_content`,`v_main_no_recommend_group_goods`.`sequence` AS `sequence`,`v_main_no_recommend_group_goods`.`name` AS `name`,`v_main_no_recommend_group_goods`.`title_pic` AS `title_pic`,`v_main_no_recommend_group_goods`.`price` AS `price`,`v_main_no_recommend_group_goods`.`sale_price` AS `sale_price`,`v_main_no_recommend_group_goods`.`goods_sale_count` AS `goods_sale_count`,`v_main_no_recommend_group_goods`.`goods_base_sale_count` AS `goods_base_sale_count`,`v_main_no_recommend_group_goods`.`title` AS `title`,`v_main_no_recommend_group_goods`.`picpath` AS `picpath`,`v_main_no_recommend_group_goods`.`group_end_time` AS `group_end_time`,`v_main_no_recommend_group_goods`.`group_start_time` AS `group_start_time`,`v_main_no_recommend_group_goods`.`group_sale_count` AS `group_sale_count`,`v_main_no_recommend_group_goods`.`base_group_sale_count` AS `base_group_sale_count`,`v_main_no_recommend_group_goods`.`group_sale_price` AS `group_sale_price`,`v_main_no_recommend_group_goods`.`small_price` AS `small_price`,`v_main_no_recommend_group_goods`.`nickname` AS `nickname`,`v_main_no_recommend_group_goods`.`member_picpath` AS `member_picpath`,`v_main_no_recommend_group_goods`.`feeling` AS `feeling`,`v_main_no_recommend_group_goods`.`group_buy_id` AS `group_buy_id`,`v_main_no_recommend_group_goods`.`gsequence` AS `gsequence` from `onlinetest`.`v_main_no_recommend_group_goods` union all select `v_main_recommend_goods`.`id` AS `id`,`v_main_recommend_goods`.`goodsid` AS `goodsid`,`v_main_recommend_goods`.`recommend_id` AS `recommend_id`,`v_main_recommend_goods`.`talent_id` AS `talent_id`,`v_main_recommend_goods`.`tryout_report_id` AS `tryout_report_id`,`v_main_recommend_goods`.`tryout_report_content` AS `tryout_report_content`,`v_main_recommend_goods`.`sequence` AS `sequence`,`v_main_recommend_goods`.`name` AS `name`,`v_main_recommend_goods`.`title_pic` AS `title_pic`,`v_main_recommend_goods`.`price` AS `price`,`v_main_recommend_goods`.`sale_price` AS `sale_price`,`v_main_recommend_goods`.`goods_sale_count` AS `goods_sale_count`,`v_main_recommend_goods`.`goods_base_sale_count` AS `goods_base_sale_count`,`v_main_recommend_goods`.`title` AS `title`,`v_main_recommend_goods`.`picpath` AS `picpath`,`v_main_recommend_goods`.`group_end_time` AS `group_end_time`,`v_main_recommend_goods`.`group_start_time` AS `group_start_time`,`v_main_recommend_goods`.`group_sale_count` AS `group_sale_count`,`v_main_recommend_goods`.`base_group_sale_count` AS `base_group_sale_count`,`v_main_recommend_goods`.`group_sale_price` AS `group_sale_price`,`v_main_recommend_goods`.`small_price` AS `small_price`,`v_main_recommend_goods`.`nickname` AS `nickname`,`v_main_recommend_goods`.`member_picpath` AS `member_picpath`,`v_main_recommend_goods`.`feeling` AS `feeling`,`v_main_recommend_goods`.`group_buy_id` AS `group_buy_id`,`v_main_recommend_goods`.`gsequence` AS `gsequence` from `onlinetest`.`v_main_recommend_goods`;

DROP VIEW IF EXISTS `v_main_cfg_recommend_manager`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_main_cfg_recommend_manager` AS select `onlinetest`.`main_cfg_recommend`.`id` AS `id`,`onlinetest`.`main_cfg_recommend`.`goodsid` AS `goodsid`,`onlinetest`.`main_cfg_recommend`.`talent_id` AS `talent_id`,`onlinetest`.`main_cfg_recommend`.`tryout_report_id` AS `tryout_report_id`,`onlinetest`.`main_cfg_recommend`.`tryout_report_content` AS `tryout_report_content`,`onlinetest`.`main_cfg_recommend`.`sequence` AS `sequence`,`onlinetest`.`main_cfg_recommend`.`status` AS `status`,`onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`goods`.`title_pic` AS `title_pic`,`onlinetest`.`goods`.`price` AS `price`,`onlinetest`.`goods`.`sale_price` AS `sale_price`,`onlinetest`.`goods`.`sale_count` AS `goods_sale_count`,`onlinetest`.`goods`.`base_sale_count` AS `goods_base_sale_count`,`onlinetest`.`tryout_report`.`title` AS `title`,`onlinetest`.`group_buy`.`picpath` AS `picpath`,`onlinetest`.`group_buy`.`end_time` AS `group_end_time`,`onlinetest`.`group_buy`.`start_time` AS `group_start_time`,`onlinetest`.`group_buy`.`sale_count` AS `group_sale_count`,`onlinetest`.`group_buy`.`base_sale_count` AS `base_group_sale_count`,`onlinetest`.`group_buy`.`sale_price` AS `group_sale_price`,`onlinetest`.`group_buy`.`small_price` AS `small_price`,`onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`member`.`picpath` AS `member_picpath`,`onlinetest`.`member`.`feeling` AS `feeling`,`onlinetest`.`group_buy`.`id` AS `group_buy_id`,(case when isnull(`onlinetest`.`group_buy`.`id`) then 0 else 1 end) AS `gsequence` from ((((`onlinetest`.`main_cfg_recommend` join `onlinetest`.`goods` on(((`onlinetest`.`main_cfg_recommend`.`goodsid` = `onlinetest`.`goods`.`id`) and (`onlinetest`.`goods`.`status` = 3)))) left join `onlinetest`.`group_buy` on((`onlinetest`.`main_cfg_recommend`.`group_buy_id` = `onlinetest`.`group_buy`.`id`))) left join `onlinetest`.`tryout_report` on(((`onlinetest`.`main_cfg_recommend`.`tryout_report_id` = `onlinetest`.`tryout_report`.`id`) and (`onlinetest`.`tryout_report`.`status` = 3)))) left join `onlinetest`.`member` on((`onlinetest`.`main_cfg_recommend`.`talent_id` = `onlinetest`.`member`.`id`))) where (((`onlinetest`.`main_cfg_recommend`.`status` = 1) and (`onlinetest`.`group_buy`.`status` = 3)) or isnull(`onlinetest`.`group_buy`.`status`));

DROP VIEW IF EXISTS `v_main_cfg_video`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_main_cfg_video` AS select `onlinetest`.`main_cfg_video`.`id` AS `id`,`onlinetest`.`main_cfg_video`.`video_id` AS `video_id`,`onlinetest`.`main_cfg_video`.`sequence` AS `sequence`,`onlinetest`.`main_cfg_video`.`status` AS `status`,`onlinetest`.`video`.`videopath` AS `videopath`,`onlinetest`.`video`.`baby_name` AS `baby_name`,`onlinetest`.`video`.`view_count` AS `view_count`,`onlinetest`.`video`.`summary` AS `summary`,`onlinetest`.`video`.`first_img_path` AS `first_img_path`,`onlinetest`.`main_cfg_video`.`video_img` AS `video_img`,`onlinetest`.`video`.`title` AS `title` from (`onlinetest`.`main_cfg_video` join `onlinetest`.`video` on((`onlinetest`.`main_cfg_video`.`video_id` = `onlinetest`.`video`.`id`)));

DROP VIEW IF EXISTS `v_member_talent`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_member_talent` AS select `onlinetest`.`talent`.`u_id` AS `u_id`,`onlinetest`.`talent`.`get_price_all` AS `get_price_all`,`onlinetest`.`talent`.`groupbuy_get_count` AS `groupbuy_get_count`,`onlinetest`.`member`.`id` AS `id`,`onlinetest`.`talent`.`id` AS `talentid`,`onlinetest`.`talent`.`has_new_group_buy` AS `has_new_group_buy`,`onlinetest`.`talent`.`has_new_import` AS `has_new_import`,`onlinetest`.`talent`.`has_new_order` AS `has_new_order`,`onlinetest`.`talent`.`has_new_fee` AS `has_new_fee` from (`onlinetest`.`member` join `onlinetest`.`talent` on((`onlinetest`.`talent`.`u_id` = `onlinetest`.`member`.`id`))) where (`onlinetest`.`talent`.`status` = 3);

DROP VIEW IF EXISTS `v_menu_root`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_menu_root` AS select `onlinetest`.`menu`.`id` AS `id`,`onlinetest`.`menu`.`name` AS `name`,`onlinetest`.`menu`.`order_code` AS `order_code` from `onlinetest`.`menu` where (`onlinetest`.`menu`.`pid` = 0);

DROP VIEW IF EXISTS `v_menu_second`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_menu_second` AS select `onlinetest`.`menu`.`id` AS `id`,`onlinetest`.`menu`.`name` AS `name`,`onlinetest`.`menu`.`url` AS `url`,`onlinetest`.`menu`.`order_code` AS `order_code`,`onlinetest`.`menu`.`pid` AS `pid` from `onlinetest`.`menu` where (`onlinetest`.`menu`.`deep` = 2);

DROP VIEW IF EXISTS `v_menu_list`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_menu_list` AS select `v_menu_second`.`id` AS `id`,`v_menu_second`.`name` AS `name`,`v_menu_second`.`url` AS `url`,`v_menu_second`.`order_code` AS `order_code`,`v_menu_root`.`id` AS `root_id`,`v_menu_root`.`name` AS `root_name` from (`onlinetest`.`v_menu_root` join `onlinetest`.`v_menu_second` on((`v_menu_root`.`id` = `v_menu_second`.`pid`))) order by `v_menu_root`.`id`;

DROP VIEW IF EXISTS `v_message_chat`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_message_chat` AS select `onlinetest`.`message_chat`.`id` AS `id`,`onlinetest`.`message_chat`.`category` AS `category`,`onlinetest`.`message_chat`.`content` AS `content`,`onlinetest`.`message_chat`.`fr_id` AS `fr_id`,`onlinetest`.`message_chat`.`to_id` AS `to_id`,`onlinetest`.`message_chat`.`status` AS `status`,`onlinetest`.`message_chat`.`create_time` AS `create_time`,`m_from`.`nickname` AS `from_nick`,`m_from`.`picpath` AS `from_head_pic`,`m_to`.`nickname` AS `to_nick`,`m_to`.`picpath` AS `to_head_pic`,`onlinetest`.`message_chat`.`data_type` AS `data_type` from ((`onlinetest`.`message_chat` join `onlinetest`.`member` `m_from` on(((`onlinetest`.`message_chat`.`fr_id` = `m_from`.`id`) and (`onlinetest`.`message_chat`.`status` < 9)))) join `onlinetest`.`member` `m_to` on((`onlinetest`.`message_chat`.`to_id` = `m_to`.`id`)));

DROP VIEW IF EXISTS `v_message_chat_count`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_message_chat_count` AS select count(1) AS `count`,`onlinetest`.`message_chat`.`fr_id` AS `fr_id`,`onlinetest`.`message_chat`.`to_id` AS `to_id` from `onlinetest`.`message_chat` where ((`onlinetest`.`message_chat`.`category` = 3) and (`onlinetest`.`message_chat`.`status` = 0)) group by `onlinetest`.`message_chat`.`fr_id`,`onlinetest`.`message_chat`.`to_id`;

DROP VIEW IF EXISTS `v_message_chat_new`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_message_chat_new` AS select `onlinetest`.`message_chat`.`fr_id` AS `fr_id`,`onlinetest`.`message_chat`.`to_id` AS `to_id`,max(`onlinetest`.`message_chat`.`create_time`) AS `create_time`,max(`onlinetest`.`message_chat`.`id`) AS `id` from `onlinetest`.`message_chat` where ((`onlinetest`.`message_chat`.`category` = 3) and ((`onlinetest`.`message_chat`.`status` = 0) or (`onlinetest`.`message_chat`.`status` = 1))) group by `onlinetest`.`message_chat`.`fr_id`,`onlinetest`.`message_chat`.`to_id`;

DROP VIEW IF EXISTS `v_message_chat_union`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_message_chat_union` AS select `onlinetest`.`message_chat`.`id` AS `id`,`onlinetest`.`message_chat`.`category` AS `category`,`onlinetest`.`message_chat`.`data_type` AS `data_type`,`onlinetest`.`message_chat`.`content` AS `content`,`onlinetest`.`message_chat`.`fr_id` AS `fr_id`,`onlinetest`.`message_chat`.`to_id` AS `to_id`,`onlinetest`.`message_chat`.`points` AS `points`,`onlinetest`.`message_chat`.`total_points` AS `total_points`,`onlinetest`.`message_chat`.`status` AS `status`,`onlinetest`.`message_chat`.`create_time` AS `create_time`,`onlinetest`.`message_chat`.`update_time` AS `update_time`,(case when (`onlinetest`.`message_chat`.`fr_id` < `onlinetest`.`message_chat`.`to_id`) then concat(`onlinetest`.`message_chat`.`fr_id`,'_',`onlinetest`.`message_chat`.`to_id`) when (`onlinetest`.`message_chat`.`fr_id` > `onlinetest`.`message_chat`.`to_id`) then concat(`onlinetest`.`message_chat`.`to_id`,'_',`onlinetest`.`message_chat`.`fr_id`) else concat(`onlinetest`.`message_chat`.`fr_id`,'_',`onlinetest`.`message_chat`.`to_id`) end) AS `unionId`,concat(`onlinetest`.`message_chat`.`fr_id`,'_',`onlinetest`.`message_chat`.`to_id`) AS `fr` from `onlinetest`.`message_chat`;

DROP VIEW IF EXISTS `v_message_info`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_message_info` AS select `onlinetest`.`message_info`.`id` AS `id`,`onlinetest`.`message_info`.`category` AS `category`,`onlinetest`.`message_info`.`list_id` AS `list_id`,`onlinetest`.`message_info`.`to_id` AS `to_id`,`onlinetest`.`message_info`.`status` AS `status`,`onlinetest`.`message_info`.`create_time` AS `create_time`,`onlinetest`.`message_list`.`title` AS `title`,`onlinetest`.`message_list`.`content` AS `content`,`onlinetest`.`message_list`.`picpath` AS `picpath`,`onlinetest`.`message_list`.`piclink` AS `piclink`,`onlinetest`.`message_list`.`op_u_id` AS `op_u_id`,`onlinetest`.`member`.`nickname` AS `oper_nick`,`onlinetest`.`member`.`picpath` AS `oper_head_pic` from ((`onlinetest`.`message_info` join `onlinetest`.`message_list` on(((`onlinetest`.`message_info`.`list_id` = `onlinetest`.`message_list`.`id`) and (`onlinetest`.`message_info`.`status` < 9)))) join `onlinetest`.`member` on((`onlinetest`.`message_list`.`op_u_id` = `onlinetest`.`member`.`id`)));

DROP VIEW IF EXISTS `v_message_list`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_message_list` AS select `onlinetest`.`message_list`.`id` AS `id`,`onlinetest`.`message_list`.`category` AS `category`,`onlinetest`.`message_list`.`title` AS `title`,`onlinetest`.`message_list`.`content` AS `content`,`onlinetest`.`message_list`.`picpath` AS `picpath`,`onlinetest`.`message_list`.`piclink` AS `piclink`,`onlinetest`.`message_list`.`status` AS `status`,`onlinetest`.`message_list`.`create_time` AS `create_time`,`memberfrom`.`nickname` AS `nickname`,`onlinetest`.`message_list`.`op_u_id` AS `op_u_id` from (`onlinetest`.`message_list` join `onlinetest`.`member` `memberfrom` on((`memberfrom`.`id` = `onlinetest`.`message_list`.`op_u_id`)));

DROP VIEW IF EXISTS `v_message_logistics`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_message_logistics` AS select `onlinetest`.`message_chat`.`id` AS `id`,`onlinetest`.`message_chat`.`category` AS `category`,`onlinetest`.`message_chat`.`content` AS `content`,`onlinetest`.`message_chat`.`fr_id` AS `fr_id`,`onlinetest`.`message_chat`.`to_id` AS `to_id`,`onlinetest`.`message_chat`.`status` AS `status`,`onlinetest`.`message_chat`.`create_time` AS `create_time`,`m_to`.`nickname` AS `to_nick`,`m_to`.`picpath` AS `to_head_pic`,`onlinetest`.`message_chat`.`data_type` AS `data_type`,`onlinetest`.`order_item`.`logistics_name` AS `logistics_name`,`onlinetest`.`order_item`.`logistics_number` AS `logistics_number`,`onlinetest`.`order_item`.`logistics_code` AS `logistics_code`,`onlinetest`.`order_item`.`goodsid` AS `goodsid`,`onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`order_item`.`speci_pic_url` AS `title_pic` from (((`onlinetest`.`message_chat` join `onlinetest`.`member` `m_to` on((`onlinetest`.`message_chat`.`to_id` = `m_to`.`id`))) join `onlinetest`.`order_item` on((`onlinetest`.`message_chat`.`fr_id` = `onlinetest`.`order_item`.`id`))) join `onlinetest`.`goods` on((`onlinetest`.`order_item`.`goodsid` = `onlinetest`.`goods`.`id`)));

DROP VIEW IF EXISTS `v_message_score`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_message_score` AS select `onlinetest`.`message_chat`.`id` AS `id`,`onlinetest`.`message_chat`.`category` AS `category`,`onlinetest`.`message_chat`.`data_type` AS `data_type`,`onlinetest`.`message_chat`.`content` AS `content`,`onlinetest`.`message_chat`.`fr_id` AS `fr_id`,`onlinetest`.`message_chat`.`to_id` AS `to_id`,`onlinetest`.`message_chat`.`points` AS `points`,`onlinetest`.`message_chat`.`total_points` AS `total_points`,`onlinetest`.`message_chat`.`status` AS `status`,`onlinetest`.`message_chat`.`create_time` AS `create_time`,(case when isnull(`onlinetest`.`order_item`.`name`) then `onlinetest`.`ticket`.`name` else `onlinetest`.`order_item`.`name` end) AS `name` from ((`onlinetest`.`message_chat` left join `onlinetest`.`order_item` on((`onlinetest`.`message_chat`.`fr_id` = `onlinetest`.`order_item`.`id`))) left join `onlinetest`.`ticket` on((`onlinetest`.`message_chat`.`fr_id` = `onlinetest`.`ticket`.`id`))) where (`onlinetest`.`message_chat`.`category` = 9);

DROP VIEW IF EXISTS `v_my_base_info`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_my_base_info` AS select `onlinetest`.`member`.`id` AS `id`,`onlinetest`.`member`.`username` AS `username`,`onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`member`.`gender` AS `gender`,`onlinetest`.`member`.`cardnum` AS `cardnum`,`onlinetest`.`member`.`realname` AS `realname` from `onlinetest`.`member`;

DROP VIEW IF EXISTS `v_my_center_info`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_my_center_info` AS select `onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`member`.`picpath` AS `picpath`,`onlinetest`.`member`.`favorite_count` AS `favorite_count`,`onlinetest`.`member`.`like_talent_count` AS `like_talent_count`,`onlinetest`.`member`.`points` AS `points`,`onlinetest`.`member`.`level` AS `level`,`onlinetest`.`member`.`check_count` AS `check_count`,`onlinetest`.`member`.`fans_like_count` AS `fans_like_count`,`onlinetest`.`member`.`id` AS `id`,`onlinetest`.`talent`.`refuse_reason` AS `refuse_reason`,`onlinetest`.`talent`.`create_time` AS `create_time`,`onlinetest`.`talent`.`has_new_group_buy` AS `has_new_group_buy`,`onlinetest`.`member`.`has_new_ticket` AS `has_new_ticket`,`onlinetest`.`talent`.`has_new_import` AS `has_new_import`,`onlinetest`.`talent`.`has_new_order` AS `has_new_order`,`onlinetest`.`member`.`has_new_tryout` AS `has_new_tryout` from (`onlinetest`.`member` left join `onlinetest`.`talent` on((`onlinetest`.`member`.`id` = `onlinetest`.`talent`.`u_id`)));

DROP VIEW IF EXISTS `v_my_favorite_goods`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_my_favorite_goods` AS select `onlinetest`.`fans_favorite`.`id` AS `id`,`onlinetest`.`fans_favorite`.`goodsid` AS `goodsid`,`onlinetest`.`fans_favorite`.`create_time` AS `create_time`,`onlinetest`.`fans_favorite`.`status` AS `status`,`onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`goods`.`title_pic` AS `title_pic`,`onlinetest`.`goods`.`price` AS `price`,`onlinetest`.`goods`.`sale_price` AS `sale_price`,(`onlinetest`.`goods`.`sale_count` + `onlinetest`.`goods`.`base_sale_count`) AS `sale_count`,`onlinetest`.`fans_favorite`.`u_id` AS `u_id`,`onlinetest`.`goods`.`activity_json` AS `activity_json` from (`onlinetest`.`fans_favorite` join `onlinetest`.`goods` on((`onlinetest`.`fans_favorite`.`goodsid` = `onlinetest`.`goods`.`id`)));

DROP VIEW IF EXISTS `v_my_like_talent_list`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_my_like_talent_list` AS select `onlinetest`.`fans_like_talent`.`id` AS `id`,`onlinetest`.`fans_like_talent`.`fansid` AS `fansid`,`onlinetest`.`fans_like_talent`.`status` AS `status`,`onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`member`.`picpath` AS `picpath`,`onlinetest`.`member`.`feeling` AS `feeling`,`onlinetest`.`member`.`level` AS `level`,`onlinetest`.`fans_like_talent`.`talentid` AS `talentid` from (`onlinetest`.`fans_like_talent` join `onlinetest`.`member` on((`onlinetest`.`fans_like_talent`.`talentid` = `onlinetest`.`member`.`id`)));

DROP VIEW IF EXISTS `v_order_main_refund_status`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_order_main_refund_status` AS select min(`v_order_refund_price_new_status`.`status`) AS `refund_status`,`v_order_refund_price_new_status`.`order_main_number` AS `order_main_number` from `onlinetest`.`v_order_refund_price_new_status` group by `v_order_refund_price_new_status`.`order_main_number`;

DROP VIEW IF EXISTS `v_order_main_sub_count`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_order_main_sub_count` AS select `onlinetest`.`order_item`.`main_order_id` AS `main_order_id`,count(1) AS `count` from `onlinetest`.`order_item` group by `onlinetest`.`order_item`.`main_order_id`;

DROP VIEW IF EXISTS `v_order_refund_apply_min_status`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_order_refund_apply_min_status` AS select min(`onlinetest`.`order_refund_apply`.`status`) AS `status`,`onlinetest`.`order_refund_apply`.`order_main_number` AS `order_main_number`,`onlinetest`.`order_refund_apply`.`order_item_id` AS `order_item_id` from `onlinetest`.`order_refund_apply` group by `onlinetest`.`order_refund_apply`.`order_main_number`;

DROP VIEW IF EXISTS `v_my_order_main`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_my_order_main` AS select `onlinetest`.`order_main`.`id` AS `id`,`onlinetest`.`order_main`.`order_number` AS `order_number`,`onlinetest`.`order_main`.`u_id` AS `u_id`,`onlinetest`.`order_main`.`consumption_category` AS `consumption_category`,`onlinetest`.`order_main`.`status` AS `status`,`onlinetest`.`order_main`.`amount` AS `amount`,`onlinetest`.`order_main`.`pay_price` AS `pay_price`,`onlinetest`.`order_main`.`pay_time` AS `pay_time`,`onlinetest`.`order_main`.`pay_category` AS `pay_category`,`onlinetest`.`order_main`.`remark` AS `remark`,`onlinetest`.`order_main`.`address_id` AS `address_id`,`onlinetest`.`order_main`.`province_name` AS `province_name`,`onlinetest`.`order_main`.`city_name` AS `city_name`,`onlinetest`.`order_main`.`zone_name` AS `zone_name`,`onlinetest`.`order_main`.`recv_name` AS `recv_name`,`onlinetest`.`order_main`.`recv_phone` AS `recv_phone`,`onlinetest`.`order_main`.`address` AS `address`,`onlinetest`.`order_main`.`is_address_modify` AS `is_address_modify`,`onlinetest`.`order_main`.`ticket_id` AS `ticket_id`,`onlinetest`.`order_main`.`vip_id_json` AS `vip_id_json`,`onlinetest`.`order_main`.`card_pay_price` AS `card_pay_price`,`onlinetest`.`order_main`.`distributor_json` AS `distributor_json`,`onlinetest`.`order_main`.`total_price` AS `total_price`,`onlinetest`.`order_main`.`tran_price` AS `tran_price`,`onlinetest`.`order_main`.`discount_price` AS `discount_price`,`onlinetest`.`order_main`.`is_balance` AS `is_balance`,`onlinetest`.`order_main`.`running_number` AS `running_number`,`onlinetest`.`order_main`.`wechat_number` AS `wechat_number`,`onlinetest`.`order_main`.`create_time` AS `create_time`,`onlinetest`.`order_main`.`update_time` AS `update_time`,`onlinetest`.`order_main`.`is_show` AS `is_show`,`v_order_main_sub_count`.`count` AS `item_count`,(case when isnull(`v_order_main_refund_status`.`refund_status`) then `v_order_refund_apply_min_status`.`status` when isnull(`v_order_refund_apply_min_status`.`status`) then `v_order_main_refund_status`.`refund_status` when (`v_order_refund_apply_min_status`.`status` > `v_order_main_refund_status`.`refund_status`) then `v_order_main_refund_status`.`refund_status` else `v_order_refund_apply_min_status`.`status` end) AS `refund_status` from (((`onlinetest`.`order_main` left join `onlinetest`.`v_order_main_sub_count` on((`onlinetest`.`order_main`.`id` = `v_order_main_sub_count`.`main_order_id`))) left join `onlinetest`.`v_order_main_refund_status` on((`onlinetest`.`order_main`.`order_number` = `v_order_main_refund_status`.`order_main_number`))) left join `onlinetest`.`v_order_refund_apply_min_status` on((`onlinetest`.`order_main`.`order_number` = `v_order_refund_apply_min_status`.`order_main_number`))) where (`onlinetest`.`order_main`.`consumption_category` <> 5);

DROP VIEW IF EXISTS `v_my_sign_record`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_my_sign_record` AS select `onlinetest`.`fans_sign_record`.`sign_index` AS `sign_index`,`onlinetest`.`fans_sign_record`.`create_time` AS `create_time`,`onlinetest`.`fans_sign_record`.`fans_id` AS `fans_id`,`onlinetest`.`fans_sign_record`.`id` AS `id`,`onlinetest`.`member`.`points` AS `points`,`onlinetest`.`member`.`picpath` AS `picpath` from (`onlinetest`.`fans_sign_record` join `onlinetest`.`member` on((`onlinetest`.`fans_sign_record`.`fans_id` = `onlinetest`.`member`.`id`))) where (`onlinetest`.`fans_sign_record`.`create_time` < now());

DROP VIEW IF EXISTS `v_my_ticket`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_my_ticket` AS select `onlinetest`.`fans_ticket`.`id` AS `id`,`onlinetest`.`fans_ticket`.`fansid` AS `fansid`,`onlinetest`.`fans_ticket`.`ticketid` AS `ticketid`,`onlinetest`.`fans_ticket`.`end_time` AS `end_time`,`onlinetest`.`fans_ticket`.`status` AS `status`,`onlinetest`.`ticket`.`type` AS `type`,`onlinetest`.`ticket`.`name` AS `name`,`onlinetest`.`ticket`.`price` AS `price`,`onlinetest`.`ticket_send_rule`.`title` AS `title` from ((`onlinetest`.`fans_ticket` join `onlinetest`.`ticket` on((`onlinetest`.`fans_ticket`.`ticketid` = `onlinetest`.`ticket`.`id`))) join `onlinetest`.`ticket_send_rule` on((`onlinetest`.`fans_ticket`.`sendid` = `onlinetest`.`ticket_send_rule`.`id`)));

DROP VIEW IF EXISTS `v_my_tryout_report`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_my_tryout_report` AS select `onlinetest`.`tryout_report`.`id` AS `id`,`onlinetest`.`tryout_report`.`fansid` AS `fansid`,`onlinetest`.`tryout_report`.`title` AS `title`,`onlinetest`.`tryout_report`.`default_pic` AS `default_pic`,`onlinetest`.`tryout_report`.`status` AS `status`,`onlinetest`.`tryout_report`.`view_count` AS `view_count`,`onlinetest`.`tryout_report`.`like_count` AS `like_count`,`onlinetest`.`tryout_report`.`create_time` AS `create_time`,`onlinetest`.`tryout_report`.`notpass_reason` AS `notpass_reason` from `onlinetest`.`tryout_report`;

DROP VIEW IF EXISTS `v_net_start_detail_goods_view`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_net_start_detail_goods_view` AS select `onlinetest`.`net_start_goods`.`id` AS `id`,`onlinetest`.`net_start_goods`.`goodsid` AS `goodsid`,`onlinetest`.`net_start_goods`.`sale_count` AS `sale_count`,`onlinetest`.`net_start_goods`.`curr_price` AS `curr_price`,`onlinetest`.`net_start_goods`.`history_price` AS `history_price`,`onlinetest`.`net_start_goods`.`sequence` AS `sequence`,`onlinetest`.`net_start_goods`.`status` AS `status`,`onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`net_start_goods`.`net_start_id` AS `net_start_id`,`onlinetest`.`goods`.`title_pic` AS `title_pic` from (`onlinetest`.`goods` join `onlinetest`.`net_start_goods` on((`onlinetest`.`net_start_goods`.`goodsid` = `onlinetest`.`goods`.`id`)));

DROP VIEW IF EXISTS `v_net_start_detail_view`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_net_start_detail_view` AS select `onlinetest`.`net_start`.`id` AS `id`,`onlinetest`.`net_start`.`picurl_json` AS `picurl_json`,`onlinetest`.`net_start`.`name` AS `name`,`onlinetest`.`net_start`.`curr_activite_url` AS `curr_activite_url`,`onlinetest`.`net_start`.`curr_activite_start_time` AS `curr_activite_start_time`,`onlinetest`.`net_start`.`curr_activite_end_time` AS `curr_activite_end_time` from `onlinetest`.`net_start`;

DROP VIEW IF EXISTS `v_net_start_goods_list`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_net_start_goods_list` AS select `onlinetest`.`net_start_goods`.`id` AS `id`,`onlinetest`.`net_start_goods`.`net_start_id` AS `net_start_id`,`onlinetest`.`net_start_goods`.`goodsid` AS `goodsid`,`onlinetest`.`net_start_goods`.`history_price` AS `history_price`,`onlinetest`.`net_start_goods`.`sequence` AS `sequence`,`onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`goods`.`title_pic` AS `title_pic`,`onlinetest`.`net_start_goods`.`status` AS `status` from (`onlinetest`.`net_start_goods` join `onlinetest`.`goods` on((`onlinetest`.`net_start_goods`.`goodsid` = `onlinetest`.`goods`.`id`)));

DROP VIEW IF EXISTS `v_net_stat_view`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_net_stat_view` AS select `onlinetest`.`net_start`.`id` AS `id`,`onlinetest`.`net_start`.`picurl_json` AS `picurl_json`,`onlinetest`.`net_start`.`fans_count` AS `fans_count`,`onlinetest`.`net_start`.`goods_count` AS `goods_count`,`onlinetest`.`net_start`.`status` AS `status`,`onlinetest`.`net_start`.`curr_activite_start_time` AS `curr_activite_start_time`,`onlinetest`.`net_start`.`curr_activite_end_time` AS `curr_activite_end_time` from `onlinetest`.`net_start`;

DROP VIEW IF EXISTS `v_new_old`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_new_old` AS select `onlinetest`.`goods`.`category` AS `category`,`onlinetest`.`goods`.`category_old` AS `category_old` from `onlinetest`.`goods` where ((`onlinetest`.`goods`.`category` is not null) and (`onlinetest`.`goods`.`category_old` is not null)) group by `onlinetest`.`goods`.`category`,`onlinetest`.`goods`.`category_old`;

DROP VIEW IF EXISTS `v_order_balance`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_order_balance` AS select `onlinetest`.`order_item`.`main_order_id` AS `main_order_id`,min(`onlinetest`.`order_item`.`is_balance`) AS `min_is_balance` from `onlinetest`.`order_item` group by `onlinetest`.`order_item`.`main_order_id`;

DROP VIEW IF EXISTS `v_order_refund_apply_count`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_order_refund_apply_count` AS select `onlinetest`.`order_refund_apply`.`order_item_id` AS `order_item_id`,count(1) AS `count` from `onlinetest`.`order_refund_apply` where (`onlinetest`.`order_refund_apply`.`status` in (0,2)) group by `onlinetest`.`order_refund_apply`.`order_item_id`;

DROP VIEW IF EXISTS `v_order_refund_price_new_status`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_order_refund_price_new_status` AS select `o`.`order_item_id` AS `order_item_id`,`o`.`status` AS `status`,`o`.`order_main_number` AS `order_main_number` from `onlinetest`.`order_refund_price` `o` where (`o`.`create_time` = (select max(`onlinetest`.`order_refund_price`.`create_time`) from `onlinetest`.`order_refund_price` where (`o`.`order_item_id` = `onlinetest`.`order_refund_price`.`order_item_id`) group by `onlinetest`.`order_refund_price`.`order_item_id`));

DROP VIEW IF EXISTS `v_order_item_goods`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_order_item_goods` AS select `onlinetest`.`goods`.`title_pic` AS `title_pic`,`onlinetest`.`order_item`.`id` AS `id`,`onlinetest`.`order_item`.`main_order_id` AS `main_order_id`,`onlinetest`.`goods`.`name` AS `goods_name`,`onlinetest`.`order_item`.`speci_id` AS `speci_id`,`onlinetest`.`order_item`.`status` AS `status_item`,`onlinetest`.`order_item`.`real_price` AS `real_price`,`onlinetest`.`order_item`.`amount` AS `amount`,`onlinetest`.`order_item`.`distributor_id` AS `distributor_id`,`onlinetest`.`order_item`.`activity_id` AS `activity_id`,`onlinetest`.`order_item`.`goodsid` AS `goodsid`,`onlinetest`.`order_item`.`sub_order_number` AS `sub_order_number`,`onlinetest`.`order_item`.`logistics_name` AS `logistics_name`,`onlinetest`.`order_item`.`logistics_number` AS `logistics_number`,`onlinetest`.`order_item`.`logistics_code` AS `logistics_code`,`onlinetest`.`order_item`.`comp_id` AS `comp_id`,`onlinetest`.`order_item`.`total_price` AS `total_price`,`onlinetest`.`order_item`.`discount_price` AS `discount_price`,`onlinetest`.`order_item`.`tran_price` AS `tran_price`,`onlinetest`.`order_item`.`activity_category` AS `activity_category`,`onlinetest`.`order_item`.`brokerage_id` AS `brokerage_id`,`onlinetest`.`order_item`.`is_balance` AS `is_balance`,`onlinetest`.`order_item`.`update_time` AS `update_time`,`onlinetest`.`order_item`.`pay_price` AS `pay_price`,`onlinetest`.`order_item`.`card_pay_price` AS `card_pay_price`,`onlinetest`.`order_item`.`create_time` AS `create_time`,`onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`member`.`realname` AS `realname`,`onlinetest`.`member`.`username` AS `username`,`onlinetest`.`talent`.`realname` AS `t_realname`,`onlinetest`.`order_item`.`speci_model1` AS `speci_model1`,`onlinetest`.`order_item`.`speci_model2` AS `speci_model2`,`onlinetest`.`order_item`.`speci_pic_url` AS `speci_pic_url`,`onlinetest`.`order_item`.`share_uid` AS `share_uid`,`v_order_refund_apply_count`.`count` AS `refund_count`,(case when isnull(`v_order_refund_price_new_status`.`status`) then `v_order_refund_apply_min_status`.`status` when isnull(`v_order_refund_apply_min_status`.`status`) then `v_order_refund_price_new_status`.`status` when (`v_order_refund_apply_min_status`.`status` > `v_order_refund_price_new_status`.`status`) then `v_order_refund_price_new_status`.`status` else `v_order_refund_apply_min_status`.`status` end) AS `refund_status`,(case when isnull(`v_order_refund_price_new_status`.`status`) then `v_order_refund_apply_min_status`.`status` when isnull(`v_order_refund_apply_min_status`.`status`) then `v_order_refund_price_new_status`.`status` when (`v_order_refund_apply_min_status`.`status` > `v_order_refund_price_new_status`.`status`) then `v_order_refund_price_new_status`.`status` else `v_order_refund_apply_min_status`.`status` end) AS `refund_show_status` from ((((((`onlinetest`.`order_item` join `onlinetest`.`goods` on((`onlinetest`.`order_item`.`goodsid` = `onlinetest`.`goods`.`id`))) left join `onlinetest`.`member` on((`onlinetest`.`order_item`.`distributor_id` = `onlinetest`.`member`.`id`))) left join `onlinetest`.`talent` on(((`onlinetest`.`member`.`id` = `onlinetest`.`talent`.`u_id`) and (`onlinetest`.`talent`.`status` in (3,4))))) left join `onlinetest`.`v_order_refund_apply_count` on((`onlinetest`.`order_item`.`id` = `v_order_refund_apply_count`.`order_item_id`))) left join `onlinetest`.`v_order_refund_price_new_status` on((`onlinetest`.`order_item`.`id` = `v_order_refund_price_new_status`.`order_item_id`))) left join `onlinetest`.`v_order_refund_apply_min_status` on((`onlinetest`.`order_item`.`id` = `v_order_refund_apply_min_status`.`order_item_id`))) where (`onlinetest`.`order_item`.`status` < 99);

DROP VIEW IF EXISTS `v_order_item_goods_all`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_order_item_goods_all` AS select `onlinetest`.`goods`.`title_pic` AS `title_pic`,`onlinetest`.`order_item`.`id` AS `id`,`onlinetest`.`order_item`.`main_order_id` AS `main_order_id`,`onlinetest`.`goods`.`name` AS `goods_name`,`onlinetest`.`order_item`.`speci_id` AS `speci_id`,`onlinetest`.`order_item`.`status` AS `status_item`,`onlinetest`.`order_item`.`real_price` AS `real_price`,`onlinetest`.`order_item`.`amount` AS `amount`,`onlinetest`.`order_item`.`distributor_id` AS `distributor_id`,`onlinetest`.`order_item`.`activity_id` AS `activity_id`,`onlinetest`.`order_item`.`goodsid` AS `goodsid`,`onlinetest`.`order_item`.`sub_order_number` AS `sub_order_number`,`onlinetest`.`order_item`.`logistics_name` AS `logistics_name`,`onlinetest`.`order_item`.`logistics_number` AS `logistics_number`,`onlinetest`.`order_item`.`logistics_code` AS `logistics_code`,`onlinetest`.`order_item`.`comp_id` AS `comp_id`,`onlinetest`.`order_item`.`total_price` AS `total_price`,`onlinetest`.`order_item`.`discount_price` AS `discount_price`,`onlinetest`.`order_item`.`tran_price` AS `tran_price`,`onlinetest`.`order_item`.`activity_category` AS `activity_category`,`onlinetest`.`order_item`.`brokerage_id` AS `brokerage_id`,`onlinetest`.`order_item`.`is_balance` AS `is_balance`,`onlinetest`.`order_item`.`update_time` AS `update_time`,`onlinetest`.`order_item`.`pay_price` AS `pay_price`,`onlinetest`.`order_item`.`card_pay_price` AS `card_pay_price`,`onlinetest`.`order_item`.`create_time` AS `create_time`,`onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`member`.`realname` AS `realname`,`onlinetest`.`member`.`username` AS `username`,`onlinetest`.`talent`.`realname` AS `t_realname`,`onlinetest`.`order_item`.`speci_model1` AS `speci_model1`,`onlinetest`.`order_item`.`speci_model2` AS `speci_model2`,`onlinetest`.`order_item`.`speci_pic_url` AS `speci_pic_url`,(case when isnull(`v_order_refund_price_new_status`.`status`) then `v_order_refund_apply_min_status`.`status` when isnull(`v_order_refund_apply_min_status`.`status`) then `v_order_refund_price_new_status`.`status` when (`v_order_refund_apply_min_status`.`status` > `v_order_refund_price_new_status`.`status`) then `v_order_refund_price_new_status`.`status` else `v_order_refund_apply_min_status`.`status` end) AS `refund_show_status` from (((((`onlinetest`.`order_item` join `onlinetest`.`goods` on((`onlinetest`.`order_item`.`goodsid` = `onlinetest`.`goods`.`id`))) left join `onlinetest`.`member` on((`onlinetest`.`order_item`.`distributor_id` = `onlinetest`.`member`.`id`))) left join `onlinetest`.`talent` on(((`onlinetest`.`member`.`id` = `onlinetest`.`talent`.`u_id`) and (`onlinetest`.`talent`.`status` in (3,4))))) left join `onlinetest`.`v_order_refund_price_new_status` on((`onlinetest`.`order_item`.`id` = `v_order_refund_price_new_status`.`order_item_id`))) left join `onlinetest`.`v_order_refund_apply_min_status` on((`onlinetest`.`order_item`.`id` = `v_order_refund_apply_min_status`.`order_item_id`)));

DROP VIEW IF EXISTS `v_order_item_groupbuy`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_order_item_groupbuy` AS select `onlinetest`.`order_item`.`amount` AS `amount`,`onlinetest`.`order_item`.`status` AS `status`,`onlinetest`.`order_item`.`distributor_id` AS `distributor_id`,`onlinetest`.`order_item`.`activity_id` AS `activity_id`,`onlinetest`.`order_item`.`activity_category` AS `activity_category`,`onlinetest`.`group_buy`.`name` AS `name`,`onlinetest`.`group_buy`.`start_time` AS `start_time`,`onlinetest`.`group_buy`.`end_time` AS `end_time` from (`onlinetest`.`order_item` join `onlinetest`.`group_buy` on((`onlinetest`.`order_item`.`activity_id` = `onlinetest`.`group_buy`.`id`)));

DROP VIEW IF EXISTS `v_order_item_member`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_order_item_member` AS select `onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`member`.`picpath` AS `picpath`,`onlinetest`.`order_item`.`goodsid` AS `goodsid`,`onlinetest`.`member`.`level` AS `level`,`onlinetest`.`order_item`.`u_id` AS `u_id`,`onlinetest`.`order_item`.`id` AS `id`,`onlinetest`.`order_item`.`create_time` AS `create_time` from (`onlinetest`.`order_item` join `onlinetest`.`member` on((`onlinetest`.`order_item`.`u_id` = `onlinetest`.`member`.`id`)));

DROP VIEW IF EXISTS `v_order_item_today`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_order_item_today` AS select `onlinetest`.`order_item`.`id` AS `id`,`onlinetest`.`order_item`.`main_order_id` AS `main_order_id`,`onlinetest`.`order_item`.`pay_price` AS `sub_pay_price`,`onlinetest`.`order_item`.`total_price` AS `total_price`,`onlinetest`.`order_item`.`tran_price` AS `tran_price`,`onlinetest`.`order_item`.`activity_id` AS `activity_id`,`onlinetest`.`order_item`.`activity_category` AS `activity_category`,`onlinetest`.`order_item`.`goodsid` AS `goodsid`,`onlinetest`.`order_item`.`amount` AS `amount`,`onlinetest`.`order_item`.`speci_id` AS `speci_id`,`onlinetest`.`order_item`.`create_time` AS `create_time`,`onlinetest`.`order_item`.`status` AS `status`,`onlinetest`.`order_main`.`pay_time` AS `pay_time` from ((`onlinetest`.`order_item` join `onlinetest`.`order_main` on((`onlinetest`.`order_item`.`main_order_id` = `onlinetest`.`order_main`.`id`))) join `onlinetest`.`member` on(((`onlinetest`.`order_item`.`u_id` = `onlinetest`.`member`.`id`) and (`onlinetest`.`member`.`is_sd_user` = 0)))) where (`onlinetest`.`order_main`.`consumption_category` <> 5);

DROP VIEW IF EXISTS `v_order_main_item`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_order_main_item` AS select `onlinetest`.`order_item`.`id` AS `id`,`onlinetest`.`order_item`.`main_order_id` AS `main_order_id`,`onlinetest`.`order_main`.`vip_id_json` AS `vip_id_json`,`onlinetest`.`order_item`.`vip_id_json` AS `sub_vip_id_json`,`onlinetest`.`order_main`.`pay_price` AS `pay_price`,`onlinetest`.`order_item`.`pay_price` AS `sub_pay_price`,`onlinetest`.`order_main`.`card_pay_price` AS `card_pay_price`,`onlinetest`.`order_item`.`card_pay_price` AS `sub_card_pay_price`,`onlinetest`.`order_main`.`order_number` AS `order_number`,`onlinetest`.`order_item`.`distributor_id` AS `distributor_id`,`onlinetest`.`order_item`.`sub_order_number` AS `sub_order_number`,`onlinetest`.`order_item`.`total_price` AS `total_price`,`onlinetest`.`order_item`.`tran_price` AS `tran_price`,`onlinetest`.`order_item`.`activity_id` AS `activity_id`,`onlinetest`.`order_item`.`activity_category` AS `activity_category`,`onlinetest`.`order_item`.`goodsid` AS `goodsid`,`onlinetest`.`order_item`.`amount` AS `amount`,`onlinetest`.`order_main`.`ticket_id` AS `ticket_id`,`onlinetest`.`order_item`.`speci_id` AS `speci_id`,`onlinetest`.`order_main`.`status` AS `status` from (`onlinetest`.`order_main` join `onlinetest`.`order_item` on((`onlinetest`.`order_item`.`main_order_id` = `onlinetest`.`order_main`.`id`)));

DROP VIEW IF EXISTS `v_order_main_search`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_order_main_search` AS select `onlinetest`.`order_item`.`sub_order_number` AS `sub_order_number`,`onlinetest`.`member`.`username` AS `username`,`t_member`.`nickname` AS `t_nickname`,`t_member`.`realname` AS `t_realname`,`onlinetest`.`goods_brand`.`name` AS `brand_name`,`onlinetest`.`order_main`.`id` AS `id`,`onlinetest`.`order_main`.`order_number` AS `order_number`,`onlinetest`.`order_main`.`u_id` AS `u_id`,`onlinetest`.`order_main`.`consumption_category` AS `consumption_category`,`onlinetest`.`order_main`.`status` AS `status`,`onlinetest`.`order_main`.`amount` AS `amount`,`onlinetest`.`order_main`.`pay_price` AS `pay_price`,`onlinetest`.`order_main`.`create_time` AS `create_time`,`onlinetest`.`order_main`.`pay_time` AS `pay_time`,`onlinetest`.`order_main`.`pay_category` AS `pay_category`,`onlinetest`.`order_main`.`remark` AS `remark`,`onlinetest`.`order_main`.`address_id` AS `address_id`,`onlinetest`.`order_main`.`city_name` AS `city_name`,`onlinetest`.`order_main`.`zone_name` AS `zone_name`,`onlinetest`.`order_main`.`recv_name` AS `recv_name`,`onlinetest`.`order_main`.`recv_phone` AS `recv_phone`,`onlinetest`.`order_main`.`address` AS `address`,`onlinetest`.`order_main`.`is_address_modify` AS `is_address_modify`,`onlinetest`.`order_main`.`ticket_id` AS `ticket_id`,`onlinetest`.`order_main`.`distributor_json` AS `distributor_json`,`onlinetest`.`order_main`.`total_price` AS `total_price`,`onlinetest`.`order_main`.`tran_price` AS `tran_price`,`onlinetest`.`order_main`.`discount_price` AS `discount_price`,`onlinetest`.`order_main`.`running_number` AS `running_number`,`onlinetest`.`order_main`.`wechat_number` AS `wechat_number`,`t_member`.`username` AS `t_username`,concat(convert(`onlinetest`.`order_main`.`order_number` using utf8mb4),'|',convert(`onlinetest`.`order_item`.`sub_order_number` using utf8mb4),'|',`onlinetest`.`order_main`.`u_id`,'|',ifnull(`t_member`.`username`,''),'|',ifnull(`t_member`.`nickname`,''),'|',convert(ifnull(`t_member`.`realname`,'') using utf8mb4),'|',convert(`onlinetest`.`goods_brand`.`name` using utf8mb4),'|',convert(`onlinetest`.`order_item`.`name` using utf8mb4),'|',convert(ifnull(`onlinetest`.`order_item`.`code`,'') using utf8mb4),'|',`onlinetest`.`member`.`username`,'|',convert(`onlinetest`.`order_main`.`recv_name` using utf8mb4),'|',convert(`onlinetest`.`order_main`.`recv_phone` using utf8mb4),'|',convert(`onlinetest`.`order_main`.`province_name` using utf8mb4),convert(`onlinetest`.`order_main`.`city_name` using utf8mb4),convert(`onlinetest`.`order_main`.`zone_name` using utf8mb4),convert(`onlinetest`.`order_main`.`address` using utf8mb4),'|',convert(ifnull(`onlinetest`.`order_item`.`logistics_name`,'') using utf8mb4),'|',convert(ifnull(`onlinetest`.`order_item`.`logistics_number`,'') using utf8mb4)) AS `searchVal`,`onlinetest`.`order_main`.`vip_id_json` AS `vip_id_json`,`onlinetest`.`order_main`.`card_pay_price` AS `card_pay_price`,`onlinetest`.`order_main`.`update_time` AS `update_time`,`onlinetest`.`order_item`.`status` AS `sub_status`,`onlinetest`.`order_item`.`activity_category` AS `activity_category`,`onlinetest`.`order_refund_price`.`status` AS `apply_status`,`onlinetest`.`order_item`.`id` AS `sub_id`,`onlinetest`.`company`.`name` AS `comp_name`,`onlinetest`.`order_item`.`speci_model1` AS `speci_model1`,`onlinetest`.`order_item`.`speci_model2` AS `speci_model2`,`onlinetest`.`order_item`.`speci_id` AS `speci_id`,`onlinetest`.`order_main`.`ticket_price` AS `ticket_price`,`onlinetest`.`order_item`.`tran_price` AS `sub_tran_price`,`onlinetest`.`order_item`.`amount` AS `sub_amount`,`onlinetest`.`order_item`.`total_price` AS `sub_total_price`,`onlinetest`.`order_item`.`pay_price` AS `sub_pay_price`,`onlinetest`.`order_item`.`card_pay_price` AS `sub_card_pay_price`,`onlinetest`.`order_main`.`province_name` AS `province_name`,`onlinetest`.`order_main`.`remark_admin` AS `remark_admin`,`onlinetest`.`order_item`.`logistics_name` AS `logistics_name`,`onlinetest`.`order_item`.`logistics_number` AS `logistics_number`,`onlinetest`.`order_item`.`vip_id_json` AS `sub_vip_id_json`,`onlinetest`.`order_item`.`discount_price` AS `sub_discount_price`,`onlinetest`.`member`.`realname` AS `realname`,`onlinetest`.`member`.`cardnum` AS `cardnum`,`onlinetest`.`order_item`.`is_balance` AS `sub_is_balance`,`onlinetest`.`order_item`.`trade_send` AS `trade_send`,`onlinetest`.`order_item`.`sale_price` AS `sale_price`,`onlinetest`.`order_item`.`stock_price` AS `stock_price`,`onlinetest`.`order_item`.`code` AS `code`,`onlinetest`.`order_item`.`name` AS `name`,`onlinetest`.`order_item`.`real_price` AS `real_price`,`onlinetest`.`order_item`.`brand` AS `brand`,`onlinetest`.`order_refund_price`.`refund_price` AS `refund_price`,`onlinetest`.`order_refund_price`.`reason` AS `reason`,`onlinetest`.`order_item`.`distributor_id` AS `distributor_id`,`onlinetest`.`order_item`.`brokerage_type` AS `brokerage_type`,`onlinetest`.`order_item`.`brokerage_rate` AS `brokerage_rate`,`onlinetest`.`order_item`.`brokerage_price` AS `brokerage_price`,`onlinetest`.`order_refund_price`.`remark` AS `refund_remark`,`onlinetest`.`order_item`.`comp_id` AS `comp_id`,`onlinetest`.`order_item`.`points` AS `points`,`onlinetest`.`order_main`.`alipay_number` AS `alipay_number`,`t_member`.`is_sd_user` AS `is_sd_user`,`v_order_balance`.`min_is_balance` AS `is_balance`,`v_order_main_refund_status`.`refund_status` AS `refund_status`,(case when isnull(`v_order_main_refund_status`.`refund_status`) then `v_order_refund_apply_min_status`.`status` when isnull(`v_order_refund_apply_min_status`.`status`) then `v_order_main_refund_status`.`refund_status` when (`v_order_refund_apply_min_status`.`status` > `v_order_main_refund_status`.`refund_status`) then `v_order_main_refund_status`.`refund_status` else `v_order_refund_apply_min_status`.`status` end) AS `refund_show_status` from (((((((((`onlinetest`.`order_main` join `onlinetest`.`order_item` on((`onlinetest`.`order_main`.`id` = `onlinetest`.`order_item`.`main_order_id`))) join `onlinetest`.`member` on((`onlinetest`.`order_main`.`u_id` = `onlinetest`.`member`.`id`))) join `onlinetest`.`goods_brand` on((`onlinetest`.`order_item`.`brand` = `onlinetest`.`goods_brand`.`id`))) left join `onlinetest`.`member` `t_member` on((`onlinetest`.`order_item`.`distributor_id` = `t_member`.`id`))) left join `onlinetest`.`order_refund_price` on((`onlinetest`.`order_item`.`id` = `onlinetest`.`order_refund_price`.`order_item_id`))) join `onlinetest`.`company` on((`onlinetest`.`order_item`.`comp_id` = `onlinetest`.`company`.`id`))) join `onlinetest`.`v_order_balance` on((`v_order_balance`.`main_order_id` = `onlinetest`.`order_main`.`id`))) left join `onlinetest`.`v_order_main_refund_status` on((`onlinetest`.`order_main`.`order_number` = `v_order_main_refund_status`.`order_main_number`))) left join `onlinetest`.`v_order_refund_apply_min_status` on((`onlinetest`.`order_main`.`order_number` = `v_order_refund_apply_min_status`.`order_main_number`)));

DROP VIEW IF EXISTS `v_order_main_search_copy`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_order_main_search_copy` AS select `onlinetest`.`order_main`.`id` AS `id`,`onlinetest`.`order_main`.`create_time` AS `create_time` from ((((((`onlinetest`.`order_main` join `onlinetest`.`order_item` on((`onlinetest`.`order_main`.`id` = `onlinetest`.`order_item`.`main_order_id`))) join `onlinetest`.`member` on((`onlinetest`.`order_main`.`u_id` = `onlinetest`.`member`.`id`))) join `onlinetest`.`goods_brand` on((`onlinetest`.`order_item`.`brand` = `onlinetest`.`goods_brand`.`id`))) left join `onlinetest`.`member` `t_member` on((`onlinetest`.`order_item`.`distributor_id` = `t_member`.`id`))) left join `onlinetest`.`order_refund_price` on((`onlinetest`.`order_item`.`id` = `onlinetest`.`order_refund_price`.`order_item_id`))) join `onlinetest`.`company` on((`onlinetest`.`order_item`.`comp_id` = `onlinetest`.`company`.`id`)));

DROP VIEW IF EXISTS `v_order_main_today`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_order_main_today` AS select `onlinetest`.`order_main`.`id` AS `id`,`onlinetest`.`order_main`.`status` AS `status`,`onlinetest`.`order_main`.`amount` AS `amount`,`onlinetest`.`order_main`.`pay_price` AS `pay_price`,`onlinetest`.`order_main`.`total_price` AS `total_price`,`onlinetest`.`order_main`.`tran_price` AS `tran_price`,`onlinetest`.`order_main`.`create_time` AS `create_time`,`onlinetest`.`order_main`.`consumption_category` AS `consumption_category` from (`onlinetest`.`order_main` join `onlinetest`.`member` on(((`onlinetest`.`order_main`.`u_id` = `onlinetest`.`member`.`id`) and (`onlinetest`.`member`.`is_sd_user` = 0)))) where (`onlinetest`.`order_main`.`consumption_category` <> 5);

DROP VIEW IF EXISTS `v_order_manager_list`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_order_manager_list` AS select `onlinetest`.`order_item`.`status` AS `sub_status`,`onlinetest`.`order_main`.`order_number` AS `order_number`,`onlinetest`.`order_main`.`id` AS `id`,`onlinetest`.`order_main`.`u_id` AS `u_id`,`onlinetest`.`order_main`.`consumption_category` AS `consumption_category`,`onlinetest`.`order_main`.`status` AS `status`,`onlinetest`.`order_main`.`amount` AS `amount`,`onlinetest`.`order_main`.`pay_price` AS `pay_price`,`onlinetest`.`order_main`.`pay_time` AS `pay_time`,`onlinetest`.`order_main`.`pay_category` AS `pay_category`,`onlinetest`.`order_main`.`remark` AS `remark`,`onlinetest`.`order_main`.`address_id` AS `address_id`,`onlinetest`.`order_main`.`province_name` AS `province_name`,`onlinetest`.`order_main`.`city_name` AS `city_name`,`onlinetest`.`order_main`.`zone_name` AS `zone_name`,`onlinetest`.`order_main`.`recv_name` AS `recv_name`,`onlinetest`.`order_main`.`recv_phone` AS `recv_phone`,`onlinetest`.`order_main`.`address` AS `address`,`onlinetest`.`order_main`.`is_address_modify` AS `is_address_modify`,`onlinetest`.`order_main`.`ticket_id` AS `ticket_id`,`onlinetest`.`order_main`.`vip_id_json` AS `vip_id_json`,`onlinetest`.`order_main`.`card_pay_price` AS `card_pay_price`,`onlinetest`.`order_main`.`distributor_json` AS `distributor_json`,`onlinetest`.`order_main`.`total_price` AS `total_price`,`onlinetest`.`order_main`.`tran_price` AS `tran_price`,`onlinetest`.`order_main`.`discount_price` AS `discount_price`,`onlinetest`.`order_main`.`is_balance` AS `is_balance`,`onlinetest`.`order_main`.`running_number` AS `running_number`,`onlinetest`.`order_main`.`wechat_number` AS `wechat_number`,`onlinetest`.`order_main`.`create_time` AS `create_time`,`onlinetest`.`order_main`.`update_time` AS `update_time`,`onlinetest`.`order_item`.`activity_category` AS `activity_category`,`onlinetest`.`order_main`.`remark_admin` AS `remark_admin`,`onlinetest`.`order_item`.`comp_id` AS `comp_id`,`onlinetest`.`member`.`is_sd_user` AS `is_sd_user`,`v_order_main_refund_status`.`refund_status` AS `refund_status`,(case when isnull(`v_order_main_refund_status`.`refund_status`) then `v_order_refund_apply_min_status`.`status` when isnull(`v_order_refund_apply_min_status`.`status`) then `v_order_main_refund_status`.`refund_status` when (`v_order_refund_apply_min_status`.`status` > `v_order_main_refund_status`.`refund_status`) then `v_order_main_refund_status`.`refund_status` else `v_order_refund_apply_min_status`.`status` end) AS `refund_show_status` from ((((`onlinetest`.`order_main` join `onlinetest`.`order_item` on((`onlinetest`.`order_main`.`id` = `onlinetest`.`order_item`.`main_order_id`))) join `onlinetest`.`member` on((`onlinetest`.`member`.`id` = `onlinetest`.`order_item`.`u_id`))) left join `onlinetest`.`v_order_main_refund_status` on((`onlinetest`.`order_main`.`order_number` = `v_order_main_refund_status`.`order_main_number`))) left join `onlinetest`.`v_order_refund_apply_min_status` on((`onlinetest`.`order_main`.`order_number` = `v_order_refund_apply_min_status`.`order_main_number`)));

DROP VIEW IF EXISTS `v_order_refund_apply`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_order_refund_apply` AS select `onlinetest`.`order_refund_apply`.`id` AS `id`,`onlinetest`.`order_refund_apply`.`order_main_number` AS `order_main_number`,`onlinetest`.`order_refund_apply`.`order_item_number` AS `order_item_number`,`onlinetest`.`order_refund_apply`.`order_item_id` AS `order_item_id`,`onlinetest`.`order_refund_apply`.`goods_id` AS `goods_id`,`onlinetest`.`order_refund_apply`.`order_pay_price` AS `order_pay_price`,`onlinetest`.`order_refund_apply`.`refund_type` AS `refund_type`,`onlinetest`.`order_refund_apply`.`refund_reason_id` AS `refund_reason_id`,`onlinetest`.`order_refund_apply`.`remark` AS `remark`,`onlinetest`.`order_refund_apply`.`status` AS `status`,`onlinetest`.`order_refund_apply`.`create_time` AS `create_time`,`onlinetest`.`order_refund_apply`.`check_remark` AS `check_remark`,`onlinetest`.`order_refund_apply`.`check_time` AS `check_time`,`onlinetest`.`order_refund_apply`.`pic_list_json` AS `pic_list_json`,`onlinetest`.`member`.`username` AS `username`,`onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`member`.`realname` AS `realname`,`onlinetest`.`order_refund_reason`.`title` AS `title`,`onlinetest`.`order_refund_reason`.`remark` AS `refundReasonRemark`,`onlinetest`.`order_item`.`activity_category` AS `activity_category` from (((`onlinetest`.`member` join `onlinetest`.`order_refund_apply` on((`onlinetest`.`order_refund_apply`.`u_id` = `onlinetest`.`member`.`id`))) join `onlinetest`.`order_refund_reason` on((`onlinetest`.`order_refund_apply`.`refund_reason_id` = `onlinetest`.`order_refund_reason`.`id`))) join `onlinetest`.`order_item` on((`onlinetest`.`order_refund_apply`.`order_item_id` = `onlinetest`.`order_item`.`id`)));

DROP VIEW IF EXISTS `v_pc_goods`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_pc_goods` AS select `onlinetest`.`goods`.`id` AS `id`,`onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`goods`.`code` AS `code`,`onlinetest`.`goods`.`comp_id` AS `comp_id`,`onlinetest`.`goods`.`title_pic` AS `title_pic`,`onlinetest`.`goods`.`banner_json` AS `banner_json`,`onlinetest`.`goods`.`details_json` AS `details_json`,`onlinetest`.`goods`.`brand` AS `brand`,`onlinetest`.`goods`.`category` AS `category`,`onlinetest`.`goods`.`start_time` AS `start_time`,`onlinetest`.`goods`.`end_time` AS `end_time`,`onlinetest`.`goods`.`speci_json` AS `speci_json`,`onlinetest`.`goods`.`amount` AS `amount`,`onlinetest`.`goods`.`price` AS `price`,`onlinetest`.`goods`.`sale_price` AS `sale_price`,`onlinetest`.`goods`.`delivery` AS `delivery`,`onlinetest`.`goods`.`send_hour` AS `send_hour`,`onlinetest`.`goods`.`safeguard_json` AS `safeguard_json`,`onlinetest`.`goods`.`activity_json` AS `activity_json`,`onlinetest`.`goods`.`hot_sell` AS `hot_sell`,`onlinetest`.`goods`.`less_stock` AS `less_stock`,`onlinetest`.`goods`.`trade_send` AS `trade_send`,`onlinetest`.`goods`.`status` AS `status`,`onlinetest`.`goods`.`sale_count` AS `sale_count`,`onlinetest`.`goods`.`base_sale_count` AS `base_sale_count`,`onlinetest`.`goods`.`report_count` AS `report_count`,`onlinetest`.`goods`.`collection_count` AS `collection_count`,`onlinetest`.`goods`.`remind_count` AS `remind_count`,`onlinetest`.`goods`.`view_count` AS `view_count`,`onlinetest`.`goods`.`u_id` AS `u_id`,`onlinetest`.`goods`.`create_time` AS `create_time`,`onlinetest`.`goods`.`update_time` AS `update_time`,`onlinetest`.`goods`.`base_collection_count` AS `base_collection_count`,`onlinetest`.`goods`.`gid` AS `gid`,`onlinetest`.`goods`.`auto_inc_id` AS `auto_inc_id`,`onlinetest`.`goods`.`sequence` AS `sequence` from `onlinetest`.`goods`;

DROP VIEW IF EXISTS `v_points_mall_goods_list`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_points_mall_goods_list` AS select `onlinetest`.`points_mall_goods`.`id` AS `id`,`onlinetest`.`points_mall_goods`.`ticket_id` AS `ticket_id`,`onlinetest`.`points_mall_goods`.`points` AS `points`,`onlinetest`.`points_mall_goods`.`start_time` AS `start_time`,`onlinetest`.`points_mall_goods`.`end_time` AS `end_time`,(case `onlinetest`.`points_mall_goods`.`status` when 3 then ifnull(`v_goods_list`.`status`,`onlinetest`.`points_mall_goods`.`status`) else `onlinetest`.`points_mall_goods`.`status` end) AS `status`,`onlinetest`.`ticket`.`type` AS `type`,(case `onlinetest`.`points_mall_goods`.`category` when 1 then `onlinetest`.`ticket`.`name` else `v_goods_list`.`name` end) AS `name`,`onlinetest`.`ticket`.`full_price` AS `full_price`,`onlinetest`.`ticket`.`price` AS `price`,`onlinetest`.`ticket`.`goods_class_json` AS `goods_class_json`,`onlinetest`.`ticket`.`effect_hour` AS `effect_hour`,`onlinetest`.`ticket`.`picurl` AS `picurl`,`onlinetest`.`ticket`.`remark` AS `remark`,`onlinetest`.`ticket`.`id` AS `ticketid`,`onlinetest`.`points_mall_goods`.`speci` AS `speci`,`onlinetest`.`points_mall_goods`.`category` AS `category`,`onlinetest`.`points_mall_goods`.`amount` AS `amount`,ifnull(`onlinetest`.`ticket`.`is_show`,0) AS `is_show` from ((`onlinetest`.`points_mall_goods` left join `onlinetest`.`ticket` on((`onlinetest`.`points_mall_goods`.`ticket_id` = `onlinetest`.`ticket`.`id`))) left join `onlinetest`.`v_goods_list` on((`onlinetest`.`points_mall_goods`.`ticket_id` = `v_goods_list`.`id`)));

DROP VIEW IF EXISTS `v_points_mall_goods_view`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_points_mall_goods_view` AS select `onlinetest`.`points_mall_goods`.`id` AS `id`,`onlinetest`.`points_mall_goods`.`ticket_id` AS `ticket_id`,`onlinetest`.`points_mall_goods`.`points` AS `points`,`onlinetest`.`points_mall_goods`.`start_time` AS `start_time`,`onlinetest`.`points_mall_goods`.`end_time` AS `end_time`,`onlinetest`.`points_mall_goods`.`status` AS `status`,`onlinetest`.`ticket`.`type` AS `type`,`onlinetest`.`ticket`.`name` AS `name`,`onlinetest`.`ticket`.`picurl` AS `picurl`,`onlinetest`.`ticket`.`full_price` AS `full_price`,`onlinetest`.`ticket`.`price` AS `price`,`onlinetest`.`ticket`.`remark` AS `remark`,`onlinetest`.`ticket`.`is_show` AS `is_show` from (`onlinetest`.`points_mall_goods` join `onlinetest`.`ticket` on((`onlinetest`.`points_mall_goods`.`ticket_id` = `onlinetest`.`ticket`.`id`)));

DROP VIEW IF EXISTS `v_recommend_goods`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_recommend_goods` AS select `onlinetest`.`recommend`.`id` AS `id`,`onlinetest`.`recommend`.`goodsid` AS `goodsid`,`onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`goods`.`title_pic` AS `title_pic`,`onlinetest`.`goods`.`price` AS `price`,`onlinetest`.`goods`.`sale_price` AS `sale_price`,`onlinetest`.`goods`.`sale_count` AS `sale_count`,`onlinetest`.`goods`.`base_sale_count` AS `base_sale_count` from (`onlinetest`.`recommend` join `onlinetest`.`goods` on((`onlinetest`.`recommend`.`goodsid` = `onlinetest`.`goods`.`id`)));

DROP VIEW IF EXISTS `v_shopping_cart_count`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_shopping_cart_count` AS select sum(`onlinetest`.`shopping_cart`.`amount`) AS `count`,`onlinetest`.`shopping_cart`.`u_id` AS `u_id` from `onlinetest`.`shopping_cart` group by `onlinetest`.`shopping_cart`.`u_id`;

DROP VIEW IF EXISTS `v_shoppingcart_list`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_shoppingcart_list` AS select `onlinetest`.`shopping_cart`.`id` AS `id`,`onlinetest`.`shopping_cart`.`u_id` AS `u_id`,`onlinetest`.`shopping_cart`.`goods_id` AS `goods_id`,`onlinetest`.`shopping_cart`.`speci_id` AS `speci_id`,`onlinetest`.`shopping_cart`.`amount` AS `amount`,`onlinetest`.`shopping_cart`.`status` AS `status`,`onlinetest`.`shopping_cart`.`create_time` AS `create_time`,`onlinetest`.`shopping_cart`.`update_time` AS `update_time`,`onlinetest`.`goods`.`name` AS `goods_name`,`onlinetest`.`goods`.`title_pic` AS `title_pic`,`onlinetest`.`goods`.`speci_json` AS `speci_json`,`onlinetest`.`goods`.`activity_json` AS `activity_json`,`onlinetest`.`goods`.`category` AS `category`,`onlinetest`.`goods`.`status` AS `goods_status`,`onlinetest`.`goods`.`trade_send` AS `trade_send`,`onlinetest`.`shopping_cart`.`headstrong` AS `headstrong` from (`onlinetest`.`shopping_cart` join `onlinetest`.`goods` on(((`onlinetest`.`shopping_cart`.`goods_id` = `onlinetest`.`goods`.`id`) and (`onlinetest`.`shopping_cart`.`status` = 1))));

DROP VIEW IF EXISTS `v_special_column`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_special_column` AS select `onlinetest`.`main_cfg_special_column`.`id` AS `id`,`onlinetest`.`main_cfg_special_column`.`uid` AS `uid`,`onlinetest`.`main_cfg_special_column`.`content` AS `content`,`onlinetest`.`main_cfg_special_column`.`picpath` AS `picpath`,`onlinetest`.`main_cfg_special_column`.`status` AS `status`,`onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`member`.`picpath` AS `member_picpath`,`onlinetest`.`member`.`feeling` AS `feeling` from (`onlinetest`.`member` join `onlinetest`.`main_cfg_special_column` on((`onlinetest`.`member`.`id` = `onlinetest`.`main_cfg_special_column`.`uid`)));

DROP VIEW IF EXISTS `v_subject_goods_list`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_subject_goods_list` AS select `onlinetest`.`subject_goods`.`id` AS `id`,`onlinetest`.`subject_goods`.`subject_id` AS `subject_id`,`onlinetest`.`subject_goods`.`goodsid` AS `goodsid`,`onlinetest`.`subject_goods`.`sequence` AS `sequence`,`onlinetest`.`subject_goods`.`status` AS `status`,`onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`goods`.`title_pic` AS `title_pic`,`onlinetest`.`goods`.`price` AS `price`,`onlinetest`.`goods`.`activity_json` AS `activity_json`,`onlinetest`.`goods`.`sale_count` AS `sale_count`,`onlinetest`.`goods`.`base_sale_count` AS `base_sale_count`,`onlinetest`.`goods`.`sale_price` AS `sale_price`,`onlinetest`.`goods`.`status` AS `goods_status` from (`onlinetest`.`subject_goods` join `onlinetest`.`goods` on(((`onlinetest`.`subject_goods`.`goodsid` = `onlinetest`.`goods`.`id`) and (`onlinetest`.`goods`.`status` = 3)))) where (`onlinetest`.`goods`.`status` = 3);

DROP VIEW IF EXISTS `v_talentInfo`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_talentInfo` AS select `onlinetest`.`talent`.`level` AS `level`,`onlinetest`.`talent`.`u_id` AS `u_id`,`onlinetest`.`talent`.`back_pic` AS `back_pic`,`onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`member`.`picpath` AS `picpath`,`onlinetest`.`talent`.`status` AS `status`,`onlinetest`.`talent`.`id` AS `id`,`onlinetest`.`talent`.`phone` AS `phone`,`onlinetest`.`talent`.`qq` AS `qq`,`onlinetest`.`talent`.`we_char` AS `we_char`,`onlinetest`.`talent`.`realname` AS `realname`,`onlinetest`.`member`.`cardnum` AS `cardnum`,`onlinetest`.`talent`.`is_stay_moom` AS `is_stay_moom`,`onlinetest`.`talent`.`is_has_baby` AS `is_has_baby`,`onlinetest`.`talent`.`remark` AS `remark`,`onlinetest`.`member`.`feeling` AS `feeling`,`onlinetest`.`talent`.`refuse_reason` AS `refuse_reason`,`onlinetest`.`talent`.`create_time` AS `create_time`,`onlinetest`.`talent`.`pass_time` AS `pass_time`,`onlinetest`.`talent`.`id_card` AS `id_card`,`onlinetest`.`member`.`fans_like_count` AS `fans_like_count`,`onlinetest`.`talent`.`reason` AS `reason`,`onlinetest`.`talent`.`is_group_seller` AS `is_group_seller` from (`onlinetest`.`talent` join `onlinetest`.`member` on((`onlinetest`.`member`.`id` = `onlinetest`.`talent`.`u_id`)));

DROP VIEW IF EXISTS `v_talent_bank_record_list`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_talent_bank_record_list` AS select `onlinetest`.`talent_bank_record`.`id` AS `id`,`onlinetest`.`talent_bank_record`.`bank_id` AS `bank_id`,`onlinetest`.`talent_bank_record`.`bank_num` AS `bank_num`,`onlinetest`.`talent_bank_record`.`bank_user_name` AS `bank_user_name`,`onlinetest`.`talent_bank_record`.`order_item_id` AS `order_item_id`,`onlinetest`.`talent_bank_record`.`order_price` AS `order_price`,`onlinetest`.`talent_bank_record`.`brokerage_type` AS `brokerage_type`,`onlinetest`.`talent_bank_record`.`brokerage_price` AS `brokerage_price`,`onlinetest`.`talent_bank_record`.`price` AS `price`,`onlinetest`.`talent_bank_record`.`create_time` AS `create_time`,`onlinetest`.`talent_bank_record`.`type` AS `type`,`onlinetest`.`talent_bank_record`.`status` AS `status`,`onlinetest`.`talent`.`realname` AS `realname`,`onlinetest`.`talent`.`id_card` AS `id_card`,`onlinetest`.`talent`.`phone` AS `phone`,`onlinetest`.`talent`.`we_char` AS `we_char`,`onlinetest`.`talent`.`qq` AS `qq`,`onlinetest`.`talent_bank_record`.`u_id` AS `u_id`,`onlinetest`.`talent_bank`.`card_num` AS `card_num`,`onlinetest`.`talent_bank`.`bank_name` AS `bank_name`,`onlinetest`.`talent_bank`.`real_name` AS `real_name`,`onlinetest`.`talent_bank`.`remark` AS `remark`,`onlinetest`.`talent_bank_record`.`order_item_number` AS `order_item_number`,`onlinetest`.`talent`.`status` AS `t_status`,`onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`talent`.`get_price_all` AS `get_price_all` from (((`onlinetest`.`talent_bank_record` join `onlinetest`.`talent` on((`onlinetest`.`talent_bank_record`.`u_id` = `onlinetest`.`talent`.`u_id`))) join `onlinetest`.`talent_bank` on((`onlinetest`.`talent_bank`.`id` = `onlinetest`.`talent_bank_record`.`bank_id`))) join `onlinetest`.`member` on((`onlinetest`.`talent_bank_record`.`u_id` = `onlinetest`.`member`.`id`))) where (`onlinetest`.`talent`.`status` = 3);

DROP VIEW IF EXISTS `v_talent_brokerage_detail`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_talent_brokerage_detail` AS select `onlinetest`.`talent_bank_record`.`type` AS `type`,`onlinetest`.`talent_bank_record`.`create_time` AS `create_time`,`onlinetest`.`talent_bank_record`.`price` AS `price`,`onlinetest`.`talent_bank_record`.`brokerage_price` AS `brokerage_price`,`onlinetest`.`talent_bank_record`.`brokerage_type` AS `brokerage_type`,`onlinetest`.`talent_bank_record`.`order_price` AS `order_price`,`onlinetest`.`talent_bank_record`.`order_item_id` AS `order_item_id`,`onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`talent_bank_record`.`order_goods_count` AS `order_goods_count`,`onlinetest`.`talent_bank_record`.`u_id` AS `u_id`,`onlinetest`.`talent_bank_record`.`order_item_number` AS `order_item_number`,`onlinetest`.`talent_bank_record`.`has_sended` AS `has_sended` from (`onlinetest`.`goods` join `onlinetest`.`talent_bank_record` on((`onlinetest`.`talent_bank_record`.`goodsid` = `onlinetest`.`goods`.`id`))) where (`onlinetest`.`talent_bank_record`.`has_sended` = 1);

DROP VIEW IF EXISTS `v_talent_brokerage_list`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_talent_brokerage_list` AS select `onlinetest`.`talent`.`phone` AS `phone`,`onlinetest`.`talent`.`id_card` AS `id_card`,`onlinetest`.`talent`.`u_id` AS `u_id`,`onlinetest`.`talent`.`realname` AS `realname`,`onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`talent`.`status` AS `status` from (`onlinetest`.`talent` join `onlinetest`.`member` on((`onlinetest`.`talent`.`u_id` = `onlinetest`.`member`.`id`))) where ((`onlinetest`.`talent`.`status` = 3) and `onlinetest`.`talent`.`u_id` in (select `onlinetest`.`talent_bank_record`.`u_id` from `onlinetest`.`talent_bank_record` group by `onlinetest`.`talent_bank_record`.`u_id`));

DROP VIEW IF EXISTS `v_talent_fans_list`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_talent_fans_list` AS select `onlinetest`.`fans_like_talent`.`id` AS `id`,`onlinetest`.`fans_like_talent`.`fansid` AS `fansid`,`onlinetest`.`fans_like_talent`.`talentid` AS `talentid`,`onlinetest`.`fans_like_talent`.`status` AS `status`,`onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`member`.`picpath` AS `picpath`,`onlinetest`.`member`.`level` AS `level`,`onlinetest`.`member`.`feeling` AS `feeling` from (`onlinetest`.`fans_like_talent` join `onlinetest`.`member` on((`onlinetest`.`fans_like_talent`.`fansid` = `onlinetest`.`member`.`id`)));

DROP VIEW IF EXISTS `v_talent_group_buy_list`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_talent_group_buy_list` AS select `onlinetest`.`group_buy`.`name` AS `name`,`onlinetest`.`group_buy`.`small_price` AS `small_price`,`onlinetest`.`group_buy`.`sale_price` AS `sale_price`,`onlinetest`.`group_buy`.`sale_count` AS `sale_count`,`onlinetest`.`group_buy`.`status` AS `group_status`,`onlinetest`.`talent_group_buy_record`.`talentid` AS `talentid`,`onlinetest`.`group_buy`.`goodsid` AS `goodsid`,`onlinetest`.`group_buy`.`sequence` AS `sequence`,`onlinetest`.`talent_group_buy_record`.`status` AS `talent_group_status`,`onlinetest`.`talent_group_buy_record`.`groupbuyid` AS `groupbuyid`,`onlinetest`.`talent_group_buy_record`.`id` AS `id`,`onlinetest`.`group_buy`.`picpath` AS `picpath`,`onlinetest`.`group_buy`.`start_time` AS `start_time`,`onlinetest`.`group_buy`.`end_time` AS `end_time` from (`onlinetest`.`talent_group_buy_record` join `onlinetest`.`group_buy` on((`onlinetest`.`talent_group_buy_record`.`groupbuyid` = `onlinetest`.`group_buy`.`id`)));

DROP VIEW IF EXISTS `v_talent_group_buy_recommend_info`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_talent_group_buy_recommend_info` AS select `onlinetest`.`talent_group_buy_record`.`id` AS `id`,`onlinetest`.`member`.`level` AS `level`,`onlinetest`.`member`.`picpath` AS `picpath`,`onlinetest`.`talent_group_buy_record`.`content` AS `content`,`onlinetest`.`talent_group_buy_record`.`status` AS `status`,`onlinetest`.`talent_group_buy_record`.`talentid` AS `talentid`,`onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`talent_group_buy_record`.`groupbuyid` AS `groupbuyid` from (`onlinetest`.`member` join `onlinetest`.`talent_group_buy_record` on(((`onlinetest`.`member`.`id` = `onlinetest`.`talent_group_buy_record`.`talentid`) and (`onlinetest`.`talent_group_buy_record`.`status` = 2))));

DROP VIEW IF EXISTS `v_talent_group_buy_record_list`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_talent_group_buy_record_list` AS select `onlinetest`.`talent_group_buy_record`.`id` AS `id`,`onlinetest`.`talent_group_buy_record`.`talentid` AS `talentid`,`onlinetest`.`talent_group_buy_record`.`create_time` AS `create_time`,`onlinetest`.`talent_group_buy_record`.`content` AS `content`,`onlinetest`.`talent_group_buy_record`.`status` AS `status`,`onlinetest`.`talent_group_buy_record`.`refuse_reason` AS `refuse_reason`,`onlinetest`.`talent_group_buy_record`.`pass_time` AS `pass_time`,`onlinetest`.`talent_group_buy_record`.`sale_count` AS `sale_count`,`onlinetest`.`group_buy`.`name` AS `name`,`onlinetest`.`group_buy`.`start_time` AS `start_time`,`onlinetest`.`group_buy`.`end_time` AS `end_time`,`onlinetest`.`group_buy`.`small_price` AS `small_price`,`onlinetest`.`group_buy`.`brokerage_type` AS `brokerage_type`,`onlinetest`.`group_buy`.`brokerage_price` AS `brokerage_price`,`onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`member`.`level` AS `level`,`onlinetest`.`member`.`username` AS `username`,`onlinetest`.`group_buy`.`picpath` AS `picpath`,`onlinetest`.`group_buy`.`category` AS `category`,`onlinetest`.`group_buy`.`status` AS `gbstatus`,`onlinetest`.`group_buy`.`sale_price` AS `sale_price`,`onlinetest`.`group_buy`.`speci_json` AS `speci_json`,`onlinetest`.`group_buy`.`goodsid` AS `goodsid`,`onlinetest`.`group_buy`.`sale_count` AS `sale_count_group`,`onlinetest`.`group_buy`.`status` AS `status_group`,`onlinetest`.`talent_group_buy_record`.`groupbuyid` AS `groupbuyid`,`onlinetest`.`talent_group_buy_record`.`show_ctx` AS `show_ctx`,`onlinetest`.`member`.`picpath` AS `head_pic`,`onlinetest`.`goods`.`sale_count` AS `goods_sale_count`,`onlinetest`.`goods`.`base_sale_count` AS `goods_base_sale_count`,`onlinetest`.`goods`.`status` AS `goods_status`,`onlinetest`.`group_buy`.`base_sale_count` AS `base_sale_count`,`onlinetest`.`member`.`feeling` AS `feeling`,(case when (`onlinetest`.`group_buy`.`status` > 4) then 5 when (`onlinetest`.`group_buy`.`status` = 4) then 4 when ((`onlinetest`.`group_buy`.`start_time` < now()) and (`onlinetest`.`group_buy`.`end_time` > now())) then 1 when (`onlinetest`.`group_buy`.`start_time` > now()) then 2 else 3 end) AS `st` from (((`onlinetest`.`talent_group_buy_record` join `onlinetest`.`group_buy` on((`onlinetest`.`talent_group_buy_record`.`groupbuyid` = `onlinetest`.`group_buy`.`id`))) join `onlinetest`.`member` on((`onlinetest`.`talent_group_buy_record`.`talentid` = `onlinetest`.`member`.`id`))) join `onlinetest`.`goods` on((`onlinetest`.`goods`.`id` = `onlinetest`.`group_buy`.`goodsid`)));

DROP VIEW IF EXISTS `v_talent_group_member`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_talent_group_member` AS select `onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`member`.`picpath` AS `picpath`,`onlinetest`.`member`.`level` AS `level`,`onlinetest`.`member`.`id` AS `id`,`onlinetest`.`talent_group_buy_record`.`groupbuyid` AS `groupbuyid`,`onlinetest`.`talent_group_buy_record`.`status` AS `status`,`onlinetest`.`talent_group_buy_record`.`show_ctx` AS `show_ctx`,`onlinetest`.`talent_group_buy_record`.`content` AS `content`,`onlinetest`.`talent_group_buy_record`.`talentid` AS `talentid` from ((`onlinetest`.`member` join `onlinetest`.`talent` on((`onlinetest`.`talent`.`u_id` = `onlinetest`.`member`.`id`))) join `onlinetest`.`talent_group_buy_record` on((`onlinetest`.`talent`.`u_id` = `onlinetest`.`talent_group_buy_record`.`talentid`)));

DROP VIEW IF EXISTS `v_talent_group_order_list`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_talent_group_order_list` AS select `onlinetest`.`order_item`.`activity_id` AS `groupbuyid`,`onlinetest`.`order_item`.`activity_category` AS `activity_category`,`onlinetest`.`order_item`.`distributor_id` AS `talentid`,`onlinetest`.`order_main`.`amount` AS `amount`,`onlinetest`.`order_item`.`main_order_id` AS `main_order_id`,`onlinetest`.`order_item`.`id` AS `id`,`onlinetest`.`order_main`.`order_number` AS `order_number`,`onlinetest`.`order_main`.`create_time` AS `create_time`,`onlinetest`.`order_main`.`status` AS `status`,`onlinetest`.`order_main`.`distributor_json` AS `distributor_json` from (`onlinetest`.`order_main` join `onlinetest`.`order_item` on((`onlinetest`.`order_main`.`id` = `onlinetest`.`order_item`.`main_order_id`))) where ((`onlinetest`.`order_main`.`distributor_json` is not null) and (`onlinetest`.`order_item`.`activity_category` = 1));

DROP VIEW IF EXISTS `v_talent_import`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_talent_import` AS select `onlinetest`.`talent_import_fans`.`talentid` AS `talentid`,`onlinetest`.`talent`.`realname` AS `realname`,`onlinetest`.`talent_import_fans`.`create_time` AS `create_time`,`onlinetest`.`member`.`username` AS `username`,`onlinetest`.`member`.`nickname` AS `nickname` from ((`onlinetest`.`talent_import_fans` join `onlinetest`.`member` on((`onlinetest`.`talent_import_fans`.`talentid` = `onlinetest`.`member`.`id`))) join `onlinetest`.`talent` on(((`onlinetest`.`member`.`id` = `onlinetest`.`talent`.`u_id`) and (`onlinetest`.`talent`.`status` = 3))));

DROP VIEW IF EXISTS `v_talent_import_fans`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_talent_import_fans` AS select `onlinetest`.`talent_import_fans`.`talentid` AS `talentid`,`onlinetest`.`talent_import_fans`.`id` AS `id`,`onlinetest`.`talent_import_fans`.`fansid` AS `fansid`,`onlinetest`.`talent_import_fans`.`goodsid` AS `goodsid`,`onlinetest`.`talent_import_fans`.`create_time` AS `create_time`,`onlinetest`.`talent_import_fans`.`status` AS `status`,`onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`member`.`picpath` AS `picpath`,`onlinetest`.`member`.`level` AS `level`,`onlinetest`.`talent`.`get_price_all` AS `get_price_all`,`onlinetest`.`talent`.`groupbuy_get_count` AS `groupbuy_get_count` from ((`onlinetest`.`talent_import_fans` join `onlinetest`.`member` on((`onlinetest`.`talent_import_fans`.`fansid` = `onlinetest`.`member`.`id`))) left join `onlinetest`.`talent` on(((`onlinetest`.`talent`.`u_id` = `onlinetest`.`member`.`id`) and (`onlinetest`.`talent`.`status` = 3))));

DROP VIEW IF EXISTS `v_talent_import_st`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_talent_import_st` AS select `onlinetest`.`talent_import_fans`.`talentid` AS `talentid`,`onlinetest`.`talent_import_fans`.`create_time` AS `create_time`,`onlinetest`.`talent`.`realname` AS `realname`,`onlinetest`.`member`.`level` AS `level`,`onlinetest`.`talent_import_fans`.`fansid` AS `fansid`,`onlinetest`.`member`.`username` AS `username` from ((`onlinetest`.`talent_import_fans` join `onlinetest`.`member` on((`onlinetest`.`talent_import_fans`.`fansid` = `onlinetest`.`member`.`id`))) join `onlinetest`.`talent` on((`onlinetest`.`talent_import_fans`.`talentid` = `onlinetest`.`talent`.`u_id`)));

DROP VIEW IF EXISTS `v_talent_maininfo`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_talent_maininfo` AS select `onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`member`.`picpath` AS `picpath`,`onlinetest`.`member`.`feeling` AS `feeling`,`onlinetest`.`talent`.`id` AS `id`,`onlinetest`.`talent`.`level` AS `level`,`onlinetest`.`talent`.`u_id` AS `u_id`,`onlinetest`.`talent`.`back_pic` AS `back_pic`,`onlinetest`.`talent`.`status` AS `status`,`onlinetest`.`member`.`fans_like_count` AS `fans_like_count`,`onlinetest`.`talent`.`has_new_fee` AS `has_new_fee`,`onlinetest`.`talent`.`has_new_order` AS `has_new_order`,`onlinetest`.`talent`.`has_new_import` AS `has_new_import` from (`onlinetest`.`member` join `onlinetest`.`talent` on((`onlinetest`.`talent`.`u_id` = `onlinetest`.`member`.`id`)));

DROP VIEW IF EXISTS `v_talent_order_list_show_act`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_talent_order_list_show_act` AS select `onlinetest`.`order_item`.`activity_id` AS `groupbuyid`,`onlinetest`.`order_item`.`activity_category` AS `activity_category`,`onlinetest`.`order_item`.`distributor_id` AS `talentid`,`onlinetest`.`order_main`.`amount` AS `amount`,`onlinetest`.`order_item`.`main_order_id` AS `main_order_id`,`onlinetest`.`order_item`.`id` AS `id`,`onlinetest`.`order_main`.`order_number` AS `order_number`,`onlinetest`.`order_main`.`create_time` AS `create_time`,`onlinetest`.`order_main`.`status` AS `status`,`onlinetest`.`order_main`.`pay_time` AS `pay_time`,`onlinetest`.`order_item`.`goodsid` AS `goodsid`,`onlinetest`.`order_item`.`share_uid` AS `share_uid` from ((`onlinetest`.`order_main` join `onlinetest`.`order_item` on((`onlinetest`.`order_main`.`id` = `onlinetest`.`order_item`.`main_order_id`))) join `onlinetest`.`talent_show_act_order_cfg` on((`onlinetest`.`order_item`.`share_uid` = `onlinetest`.`talent_show_act_order_cfg`.`talent_id`))) where (`onlinetest`.`order_main`.`status` <> 99);

DROP VIEW IF EXISTS `v_talent_st`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_talent_st` AS select `t1`.`create_time` AS `create_time`,`t1`.`realname` AS `realname`,`t1`.`status` AS `status`,`onlinetest`.`talent_import_fans`.`talentid` AS `talentid`,`onlinetest`.`talent_import_fans`.`fansid` AS `fansid`,`onlinetest`.`member`.`realname` AS `import_name` from ((`onlinetest`.`talent` `t1` left join `onlinetest`.`talent_import_fans` on((`t1`.`u_id` = `onlinetest`.`talent_import_fans`.`fansid`))) left join `onlinetest`.`member` on((`onlinetest`.`talent_import_fans`.`talentid` = `onlinetest`.`member`.`id`)));

DROP VIEW IF EXISTS `v_talent_statistics`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_talent_statistics` AS select `onlinetest`.`talent`.`u_id` AS `u_id`,`onlinetest`.`member`.`id` AS `id`,`onlinetest`.`talent`.`id` AS `talentid`,`onlinetest`.`member`.`level` AS `level`,`onlinetest`.`talent`.`realname` AS `realname` from (`onlinetest`.`member` join `onlinetest`.`talent` on((`onlinetest`.`talent`.`u_id` = `onlinetest`.`member`.`id`))) where (`onlinetest`.`talent`.`status` = 3);

DROP VIEW IF EXISTS `v_today_new`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_today_new` AS select `onlinetest`.`today_new`.`id` AS `id`,`onlinetest`.`today_new`.`goodsid` AS `goodsid`,`onlinetest`.`today_new`.`sequence` AS `sequence`,`onlinetest`.`today_new`.`status` AS `status`,`onlinetest`.`today_new`.`create_time` AS `create_time`,`onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`goods`.`title_pic` AS `title_pic`,`onlinetest`.`goods`.`price` AS `price`,`onlinetest`.`goods`.`sale_price` AS `sale_price`,`onlinetest`.`goods`.`sale_count` AS `sale_count`,`onlinetest`.`goods`.`base_sale_count` AS `base_sale_count`,`onlinetest`.`goods`.`activity_json` AS `activity_json`,`onlinetest`.`goods`.`status` AS `gstatus` from (`onlinetest`.`today_new` join `onlinetest`.`goods` on(((`onlinetest`.`today_new`.`goodsid` = `onlinetest`.`goods`.`id`) and (`onlinetest`.`today_new`.`status` < 99))));

DROP VIEW IF EXISTS `v_tryout_apply_auth`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_tryout_apply_auth` AS select `onlinetest`.`tryout_apply`.`id` AS `id`,`onlinetest`.`tryout_apply`.`tryoutid` AS `tryoutid`,`onlinetest`.`tryout_apply`.`fansid` AS `fansid`,`onlinetest`.`tryout_apply`.`apply_time` AS `apply_time`,`onlinetest`.`tryout_apply`.`check_time` AS `check_time`,`onlinetest`.`tryout_apply`.`pass_time` AS `pass_time`,`onlinetest`.`tryout_apply`.`order_main_id` AS `order_main_id`,`onlinetest`.`tryout_apply`.`order_item_id` AS `order_item_id`,`onlinetest`.`tryout_apply`.`reported` AS `reported`,`onlinetest`.`tryout_apply`.`status` AS `status`,`onlinetest`.`tryout_apply`.`create_time` AS `create_time`,`onlinetest`.`order_main`.`status` AS `order_status` from (`onlinetest`.`tryout_apply` join `onlinetest`.`order_main` on((`onlinetest`.`tryout_apply`.`order_main_id` = `onlinetest`.`order_main`.`id`))) where (`onlinetest`.`order_main`.`status` in (1,2,3,4));

DROP VIEW IF EXISTS `v_tryout_apply_list`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_tryout_apply_list` AS select `onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`tryout_apply`.`id` AS `id`,`onlinetest`.`tryout`.`start_time` AS `start_time`,`onlinetest`.`tryout`.`end_time` AS `end_time`,`onlinetest`.`tryout`.`category` AS `category`,`onlinetest`.`member`.`username` AS `username`,`onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`tryout_apply`.`apply_time` AS `apply_time`,`onlinetest`.`member`.`level` AS `level`,`onlinetest`.`tryout`.`tryout_price` AS `tryout_price`,`onlinetest`.`tryout_apply`.`status` AS `status`,`onlinetest`.`order_item`.`main_order_id` AS `main_order_id`,`onlinetest`.`order_main`.`recv_name` AS `recv_name`,`onlinetest`.`order_main`.`recv_phone` AS `recv_phone`,`onlinetest`.`order_main`.`address` AS `address`,`onlinetest`.`order_main`.`province_name` AS `province_name`,`onlinetest`.`order_main`.`city_name` AS `city_name`,`onlinetest`.`order_main`.`zone_name` AS `zone_name`,`onlinetest`.`order_main`.`status` AS `ostatus`,`onlinetest`.`order_main`.`consumption_category` AS `consumption_category`,`onlinetest`.`order_main`.`order_number` AS `order_number`,`onlinetest`.`goods`.`status` AS `gstatus`,`onlinetest`.`order_main`.`create_time` AS `create_time` from (((((`onlinetest`.`tryout_apply` join `onlinetest`.`tryout` on((`onlinetest`.`tryout_apply`.`tryoutid` = `onlinetest`.`tryout`.`id`))) join `onlinetest`.`member` on((`onlinetest`.`tryout_apply`.`fansid` = `onlinetest`.`member`.`id`))) join `onlinetest`.`goods` on((`onlinetest`.`tryout`.`goodsid` = `onlinetest`.`goods`.`id`))) join `onlinetest`.`order_item` on((`onlinetest`.`tryout_apply`.`order_item_id` = `onlinetest`.`order_item`.`id`))) join `onlinetest`.`order_main` on((`onlinetest`.`order_item`.`main_order_id` = `onlinetest`.`order_main`.`id`))) where ((`onlinetest`.`order_main`.`consumption_category` in (3,5)) and (`onlinetest`.`order_main`.`status` in (1,2,3,4,5,6,7,8,9,10,11)));

DROP VIEW IF EXISTS `v_tryout_apply_order_info`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_tryout_apply_order_info` AS select `onlinetest`.`order_item`.`id` AS `id`,`onlinetest`.`order_item`.`goodsid` AS `goodsid`,`onlinetest`.`order_item`.`speci_id` AS `speci_id`,`onlinetest`.`goods`.`speci_json` AS `speci_json`,`onlinetest`.`order_item`.`status` AS `status`,`onlinetest`.`goods`.`amount` AS `amount`,`onlinetest`.`order_item`.`u_id` AS `u_id` from (`onlinetest`.`order_item` join `onlinetest`.`goods` on((`onlinetest`.`order_item`.`goodsid` = `onlinetest`.`goods`.`id`))) where (`onlinetest`.`order_item`.`status` in (1,2,3,4));

DROP VIEW IF EXISTS `v_tryout_apply_order_item`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_tryout_apply_order_item` AS select `onlinetest`.`tryout_apply`.`tryoutid` AS `tryoutid`,`onlinetest`.`tryout_apply`.`fansid` AS `fansid`,`onlinetest`.`tryout_apply`.`id` AS `id` from (`onlinetest`.`tryout_apply` join `onlinetest`.`order_item` on((`onlinetest`.`tryout_apply`.`order_item_id` = `onlinetest`.`order_item`.`id`))) where (`onlinetest`.`order_item`.`status` = 4);

DROP VIEW IF EXISTS `v_tryout_apply_tryout_list`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_tryout_apply_tryout_list` AS select `onlinetest`.`tryout_apply`.`id` AS `id`,`onlinetest`.`tryout_apply`.`tryoutid` AS `tryoutid`,`onlinetest`.`tryout_apply`.`fansid` AS `fansid`,`onlinetest`.`tryout_apply`.`apply_time` AS `apply_time`,`onlinetest`.`tryout_apply`.`check_time` AS `check_time`,`onlinetest`.`tryout_apply`.`pass_time` AS `pass_time`,`onlinetest`.`tryout_apply`.`order_main_id` AS `order_main_id`,`onlinetest`.`tryout_apply`.`order_item_id` AS `order_item_id`,`onlinetest`.`tryout_apply`.`reported` AS `reported`,`onlinetest`.`tryout_apply`.`status` AS `status`,`onlinetest`.`tryout`.`category` AS `category`,`onlinetest`.`tryout`.`amount` AS `amount` from (`onlinetest`.`tryout_apply` join `onlinetest`.`tryout` on((`onlinetest`.`tryout_apply`.`tryoutid` = `onlinetest`.`tryout`.`id`)));

DROP VIEW IF EXISTS `v_tryout_apply_view`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_tryout_apply_view` AS select `onlinetest`.`tryout_apply`.`id` AS `id`,`onlinetest`.`tryout_apply`.`tryoutid` AS `tryoutid`,`onlinetest`.`tryout_apply`.`fansid` AS `fansid`,`onlinetest`.`tryout_apply`.`status` AS `status`,`onlinetest`.`tryout`.`goodsid` AS `goodsid`,`onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`goods`.`title_pic` AS `title_pic`,`onlinetest`.`goods`.`price` AS `price`,`onlinetest`.`goods`.`sale_price` AS `sale_price`,`onlinetest`.`tryout_apply`.`apply_time` AS `apply_time`,`onlinetest`.`tryout_apply`.`order_item_id` AS `order_item_id`,`onlinetest`.`tryout`.`apply_count` AS `apply_count`,`onlinetest`.`tryout`.`start_time` AS `start_time`,`onlinetest`.`tryout`.`end_time` AS `end_time`,`onlinetest`.`tryout`.`category` AS `category`,`onlinetest`.`tryout`.`amount` AS `amount`,`onlinetest`.`tryout`.`tryout_price` AS `tryout_price`,`onlinetest`.`tryout`.`sequnce` AS `sequnce`,`onlinetest`.`tryout`.`fans_type` AS `fans_type`,`onlinetest`.`tryout`.`talent_level` AS `talent_level`,`onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`member`.`picpath` AS `picpath`,`onlinetest`.`tryout_apply`.`create_time` AS `create_time`,`onlinetest`.`tryout_apply`.`reported` AS `reported`,`onlinetest`.`order_item`.`status` AS `order_item_status`,`onlinetest`.`tryout_apply`.`order_main_id` AS `order_main_id`,`onlinetest`.`order_main`.`consumption_category` AS `consumption_category`,`onlinetest`.`order_main`.`order_number` AS `order_number` from (((((`onlinetest`.`tryout` join `onlinetest`.`tryout_apply` on((`onlinetest`.`tryout_apply`.`tryoutid` = `onlinetest`.`tryout`.`id`))) join `onlinetest`.`goods` on((`onlinetest`.`tryout`.`goodsid` = `onlinetest`.`goods`.`id`))) join `onlinetest`.`member` on((`onlinetest`.`tryout_apply`.`fansid` = `onlinetest`.`member`.`id`))) join `onlinetest`.`order_item` on((`onlinetest`.`tryout_apply`.`order_item_id` = `onlinetest`.`order_item`.`id`))) join `onlinetest`.`order_main` on((`onlinetest`.`tryout_apply`.`order_main_id` = `onlinetest`.`order_main`.`id`))) where (`onlinetest`.`order_item`.`status` in (1,2,3,4,5,6,7,8,9,10,11));

DROP VIEW IF EXISTS `v_tryout_detail`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_tryout_detail` AS select `onlinetest`.`tryout`.`id` AS `id`,`onlinetest`.`tryout`.`goodsid` AS `goodsid`,`onlinetest`.`tryout`.`tryout_price` AS `tryout_price`,`onlinetest`.`tryout`.`fans_type` AS `fans_type`,`onlinetest`.`tryout`.`talent_level` AS `talent_level`,`onlinetest`.`tryout`.`start_time` AS `start_time`,`onlinetest`.`tryout`.`end_time` AS `end_time`,`onlinetest`.`tryout`.`apply_count` AS `apply_count`,`onlinetest`.`goods`.`banner_json` AS `banner_json`,`onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`tryout`.`amount` AS `amount`,`onlinetest`.`tryout`.`category` AS `category`,`onlinetest`.`tryout`.`sequnce` AS `sequnce`,`onlinetest`.`tryout`.`status` AS `status`,`onlinetest`.`goods`.`price` AS `original_price`,`onlinetest`.`goods`.`details_json` AS `details_json`,`onlinetest`.`goods`.`speci_json` AS `speci_json`,`onlinetest`.`goods`.`sale_price` AS `sale_price`,`onlinetest`.`goods`.`title_pic` AS `title_pic` from (`onlinetest`.`tryout` join `onlinetest`.`goods` on((`onlinetest`.`tryout`.`goodsid` = `onlinetest`.`goods`.`id`)));

DROP VIEW IF EXISTS `v_tryout_left_amount_view`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_tryout_left_amount_view` AS select `onlinetest`.`tryout`.`amount` AS `amount`,`onlinetest`.`tryout_apply`.`status` AS `apply_status`,`onlinetest`.`tryout`.`status` AS `status`,`onlinetest`.`tryout_apply`.`id` AS `id`,`onlinetest`.`tryout`.`id` AS `tryoutid` from (`onlinetest`.`tryout` left join `onlinetest`.`tryout_apply` on((`onlinetest`.`tryout`.`id` = `onlinetest`.`tryout_apply`.`tryoutid`))) where (`onlinetest`.`tryout`.`status` in (3,4));

DROP VIEW IF EXISTS `v_tryout_praise_member`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_tryout_praise_member` AS select `onlinetest`.`tryout_praise`.`id` AS `id`,`onlinetest`.`tryout_praise`.`u_id` AS `u_id`,`onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`member`.`picpath` AS `picpath`,`onlinetest`.`member`.`level` AS `level`,`onlinetest`.`tryout_praise`.`tryout_id` AS `tryout_id`,`onlinetest`.`tryout_praise`.`status` AS `status`,`onlinetest`.`tryout_praise`.`update_time` AS `update_time`,`onlinetest`.`member`.`username` AS `username` from (`onlinetest`.`tryout_praise` join `onlinetest`.`member` on((`onlinetest`.`tryout_praise`.`u_id` = `onlinetest`.`member`.`id`)));

DROP VIEW IF EXISTS `v_tryout_report_detail_view`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_tryout_report_detail_view` AS select `onlinetest`.`tryout_report`.`id` AS `id`,`onlinetest`.`tryout_report`.`tryoutid` AS `tryoutid`,`onlinetest`.`tryout_report`.`fansid` AS `fansid`,`onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`member`.`picpath` AS `picpath`,`onlinetest`.`tryout_report`.`goodsid` AS `goodsid`,`onlinetest`.`goods`.`name` AS `goods_name`,`onlinetest`.`goods`.`price` AS `price`,`onlinetest`.`goods`.`title_pic` AS `title_pic`,`onlinetest`.`tryout_report`.`title` AS `title`,`onlinetest`.`tryout_report`.`content_json` AS `content_json`,`onlinetest`.`tryout_report`.`status` AS `status`,`onlinetest`.`tryout_report`.`sequence` AS `sequence`,`onlinetest`.`tryout_report`.`view_count` AS `view_count`,`onlinetest`.`tryout_report`.`like_count` AS `like_count`,`onlinetest`.`member`.`level` AS `level`,`onlinetest`.`tryout_report`.`istop` AS `istop`,`onlinetest`.`tryout_report`.`create_time` AS `create_time`,`onlinetest`.`tryout_report`.`update_time` AS `update_time`,`onlinetest`.`goods`.`status` AS `gstatus`,`onlinetest`.`goods`.`activity_json` AS `activity_json`,`onlinetest`.`member`.`feeling` AS `feeling` from ((`onlinetest`.`tryout_report` join `onlinetest`.`member` on((`onlinetest`.`tryout_report`.`fansid` = `onlinetest`.`member`.`id`))) join `onlinetest`.`goods` on((`onlinetest`.`tryout_report`.`goodsid` = `onlinetest`.`goods`.`id`)));

DROP VIEW IF EXISTS `v_tryout_report_list`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_tryout_report_list` AS select `onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`tryout_report`.`create_time` AS `create_time`,`onlinetest`.`tryout_report`.`title` AS `title`,`onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`member`.`username` AS `username`,`onlinetest`.`member`.`level` AS `level`,`onlinetest`.`tryout_report`.`view_count` AS `view_count`,`onlinetest`.`tryout_report`.`like_count` AS `like_count`,`onlinetest`.`tryout_report`.`status` AS `status`,`onlinetest`.`tryout_report`.`content_json` AS `content_json`,`onlinetest`.`tryout_report`.`notpass_reason` AS `notpass_reason`,`onlinetest`.`tryout_report`.`id` AS `id`,`onlinetest`.`tryout_report`.`goodsid` AS `goodsid`,`onlinetest`.`tryout_report`.`fansid` AS `fansid`,`onlinetest`.`tryout_report`.`sequence` AS `sequence`,`onlinetest`.`tryout_report`.`check_time` AS `check_time`,`onlinetest`.`tryout_report`.`tryoutid` AS `tryoutid`,`onlinetest`.`tryout_report`.`default_pic` AS `default_pic`,`onlinetest`.`member`.`picpath` AS `picpath` from ((`onlinetest`.`tryout_report` join `onlinetest`.`goods` on((`onlinetest`.`tryout_report`.`goodsid` = `onlinetest`.`goods`.`id`))) join `onlinetest`.`member` on((`onlinetest`.`tryout_report`.`fansid` = `onlinetest`.`member`.`id`)));

DROP VIEW IF EXISTS `v_tryout_report_video_goods_view`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_tryout_report_video_goods_view` AS select `onlinetest`.`tryout_report_video_goods`.`id` AS `id`,`onlinetest`.`tryout_report_video_goods`.`goodsid` AS `goodsid`,`onlinetest`.`tryout_report_video_goods`.`type` AS `type`,`onlinetest`.`tryout_report_video_goods`.`sequence` AS `sequence`,`onlinetest`.`tryout_report_video_goods`.`status` AS `status`,`onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`goods`.`title_pic` AS `title_pic`,`onlinetest`.`goods`.`sale_price` AS `sale_price`,`onlinetest`.`goods`.`price` AS `price`,`onlinetest`.`goods`.`sale_count` AS `sale_count`,`onlinetest`.`tryout_report_video_goods`.`report_video_id` AS `report_video_id` from (`onlinetest`.`tryout_report_video_goods` join `onlinetest`.`goods` on((`onlinetest`.`tryout_report_video_goods`.`goodsid` = `onlinetest`.`goods`.`id`)));

DROP VIEW IF EXISTS `v_tryout_report_view`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_tryout_report_view` AS select `onlinetest`.`tryout_report`.`id` AS `id`,`onlinetest`.`tryout_report`.`fansid` AS `fansid`,`onlinetest`.`member`.`nickname` AS `nickname`,`onlinetest`.`member`.`picpath` AS `picpath`,`onlinetest`.`tryout_report`.`title` AS `title`,`onlinetest`.`tryout_report`.`default_pic` AS `default_pic`,`onlinetest`.`tryout_report`.`status` AS `status`,`onlinetest`.`tryout_report`.`istop` AS `istop`,`onlinetest`.`tryout_report`.`sequence` AS `sequence`,`onlinetest`.`tryout_report`.`create_time` AS `create_time`,`onlinetest`.`tryout_report`.`view_count` AS `view_count`,`onlinetest`.`tryout_report`.`like_count` AS `like_count`,`onlinetest`.`tryout_report`.`goods_class_id` AS `goods_class_id`,`onlinetest`.`member`.`level` AS `level`,`onlinetest`.`member`.`feeling` AS `feeling`,`onlinetest`.`tryout_report`.`release_time` AS `release_time` from (`onlinetest`.`tryout_report` join `onlinetest`.`member` on((`onlinetest`.`tryout_report`.`fansid` = `onlinetest`.`member`.`id`)));

DROP VIEW IF EXISTS `v_tryout_view`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_tryout_view` AS select `onlinetest`.`tryout`.`id` AS `id`,`onlinetest`.`tryout`.`goodsid` AS `goodsid`,`onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`goods`.`title_pic` AS `title_pic`,`onlinetest`.`goods`.`price` AS `price`,`onlinetest`.`goods`.`sale_price` AS `sale_price`,`onlinetest`.`goods`.`status` AS `gstatus`,`onlinetest`.`tryout`.`tryout_price` AS `tryout_price`,`onlinetest`.`tryout`.`fans_type` AS `fans_type`,`onlinetest`.`tryout`.`talent_level` AS `talent_level`,`onlinetest`.`tryout`.`start_time` AS `start_time`,`onlinetest`.`tryout`.`end_time` AS `end_time`,`onlinetest`.`tryout`.`apply_count` AS `apply_count`,`onlinetest`.`tryout`.`category` AS `category`,`onlinetest`.`tryout`.`amount` AS `amount`,`onlinetest`.`tryout`.`status` AS `status`,`onlinetest`.`tryout`.`create_time` AS `create_time`,`onlinetest`.`tryout`.`update_time` AS `update_time`,(case when (now() > `onlinetest`.`tryout`.`end_time`) then -(1) else `onlinetest`.`tryout`.`sequnce` end) AS `sequnce` from (`onlinetest`.`tryout` join `onlinetest`.`goods` on((`onlinetest`.`tryout`.`goodsid` = `onlinetest`.`goods`.`id`)));

DROP VIEW IF EXISTS `v_videoDetail`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_videoDetail` AS select `onlinetest`.`goods_category`.`name` AS `goods_category_name`,`onlinetest`.`video`.`id` AS `id`,`onlinetest`.`video`.`first_img_path` AS `first_img_path`,`onlinetest`.`video`.`videopath` AS `videopath`,`onlinetest`.`video`.`baby_name` AS `baby_name`,`onlinetest`.`video`.`view_count` AS `view_count`,`onlinetest`.`video`.`goods_category_id` AS `goods_category_id`,`onlinetest`.`video`.`summary` AS `summary`,`onlinetest`.`video`.`status` AS `status`,`onlinetest`.`video`.`create_time` AS `create_time`,`onlinetest`.`video`.`update_time` AS `update_time`,`onlinetest`.`goods_category`.`pid` AS `pid` from (`onlinetest`.`goods_category` join `onlinetest`.`video` on((`onlinetest`.`video`.`goods_category_id` = `onlinetest`.`goods_category`.`id`)));

DROP VIEW IF EXISTS `v_video_goods`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_video_goods` AS select `onlinetest`.`video_goods`.`id` AS `id`,`onlinetest`.`video_goods`.`video_id` AS `video_id`,`onlinetest`.`video_goods`.`goods_id` AS `goods_id`,`onlinetest`.`video_goods`.`status` AS `status`,`onlinetest`.`video_goods`.`create_time` AS `create_time`,`onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`goods`.`title_pic` AS `title_pic`,`onlinetest`.`goods`.`price` AS `price`,`onlinetest`.`goods`.`sale_price` AS `sale_price`,`onlinetest`.`goods`.`sale_count` AS `sale_count`,`onlinetest`.`goods`.`activity_json` AS `activity_json`,`onlinetest`.`video`.`baby_name` AS `baby_name`,`onlinetest`.`video`.`status` AS `vstatus`,`onlinetest`.`video`.`view_count` AS `view_count`,`onlinetest`.`video`.`summary` AS `summary`,`onlinetest`.`goods`.`base_sale_count` AS `base_sale_count` from ((`onlinetest`.`video_goods` join `onlinetest`.`goods` on(((`onlinetest`.`video_goods`.`goods_id` = `onlinetest`.`goods`.`id`) and (`onlinetest`.`goods`.`status` = 3)))) join `onlinetest`.`video` on((`onlinetest`.`video_goods`.`video_id` = `onlinetest`.`video`.`id`))) where (`onlinetest`.`video_goods`.`status` < 99);

DROP VIEW IF EXISTS `v_video_goods_list`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_video_goods_list` AS select `onlinetest`.`video_goods`.`id` AS `id`,`onlinetest`.`video_goods`.`video_id` AS `video_id`,`onlinetest`.`video_goods`.`goods_id` AS `goods_id`,`onlinetest`.`video_goods`.`status` AS `status`,`onlinetest`.`video_goods`.`create_time` AS `create_time`,`onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`goods`.`sale_count` AS `sale_count`,`onlinetest`.`goods`.`price` AS `price`,`onlinetest`.`goods`.`sale_price` AS `sale_price`,`onlinetest`.`goods`.`title_pic` AS `title_pic`,`onlinetest`.`video`.`first_img_path` AS `first_img_path`,`onlinetest`.`video`.`videopath` AS `videopath`,`onlinetest`.`video`.`baby_name` AS `baby_name`,`onlinetest`.`video`.`view_count` AS `view_count`,`onlinetest`.`video`.`goods_category_id` AS `goods_category_id`,`onlinetest`.`video`.`summary` AS `summary`,`onlinetest`.`goods`.`base_sale_count` AS `base_sale_count` from ((`onlinetest`.`goods` join `onlinetest`.`video_goods` on((`onlinetest`.`video_goods`.`goods_id` = `onlinetest`.`goods`.`id`))) join `onlinetest`.`video` on((`onlinetest`.`video`.`id` = `onlinetest`.`video_goods`.`video_id`))) where ((`onlinetest`.`video`.`status` = 1) and (`onlinetest`.`video_goods`.`status` = 1));

DROP VIEW IF EXISTS `v_video_list`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_video_list` AS select `onlinetest`.`video`.`id` AS `id`,`onlinetest`.`video`.`first_img_path` AS `first_img_path`,`onlinetest`.`video`.`videopath` AS `videopath`,`onlinetest`.`video`.`baby_name` AS `baby_name`,`onlinetest`.`video`.`view_count` AS `view_count`,`onlinetest`.`video`.`goods_category_id` AS `goods_category_id`,`onlinetest`.`video`.`summary` AS `summary`,`onlinetest`.`video`.`status` AS `status`,`onlinetest`.`video`.`create_time` AS `create_time`,`onlinetest`.`video`.`update_time` AS `update_time`,`v_goods_category`.`id3` AS `id3`,`v_goods_category`.`name3` AS `name3`,`v_goods_category`.`id2` AS `id2`,`v_goods_category`.`name2` AS `name2`,`v_goods_category`.`id1` AS `id1`,`v_goods_category`.`name1` AS `name1`,`onlinetest`.`video`.`title` AS `title` from (`onlinetest`.`video` join `onlinetest`.`v_goods_category` on((`onlinetest`.`video`.`goods_category_id` = `v_goods_category`.`id3`)));

DROP VIEW IF EXISTS `v_video_similar`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_video_similar` AS select `onlinetest`.`video_similar_goods`.`id` AS `id`,`onlinetest`.`video_similar_goods`.`video_id` AS `video_id`,`onlinetest`.`video_similar_goods`.`goods_id` AS `goods_id`,`onlinetest`.`video_similar_goods`.`status` AS `status`,`onlinetest`.`video_similar_goods`.`create_time` AS `create_time`,`onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`goods`.`title_pic` AS `title_pic`,`onlinetest`.`goods`.`price` AS `price`,`onlinetest`.`goods`.`sale_price` AS `sale_price`,`onlinetest`.`goods`.`sale_count` AS `sale_count`,`onlinetest`.`goods`.`activity_json` AS `activity_json`,`onlinetest`.`goods`.`base_sale_count` AS `base_sale_count` from (`onlinetest`.`video_similar_goods` join `onlinetest`.`goods` on(((`onlinetest`.`video_similar_goods`.`goods_id` = `onlinetest`.`goods`.`id`) and (`onlinetest`.`goods`.`status` = 3))));

DROP VIEW IF EXISTS `v_video_similar_goodsList`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_video_similar_goodsList` AS select `onlinetest`.`video_similar_goods`.`id` AS `id`,`onlinetest`.`video_similar_goods`.`video_id` AS `video_id`,`onlinetest`.`video_similar_goods`.`goods_id` AS `goods_id`,`onlinetest`.`video_similar_goods`.`status` AS `status`,`onlinetest`.`video_similar_goods`.`create_time` AS `create_time`,`onlinetest`.`video`.`first_img_path` AS `first_img_path`,`onlinetest`.`video`.`videopath` AS `videopath`,`onlinetest`.`video`.`view_count` AS `view_count`,`onlinetest`.`video`.`baby_name` AS `baby_name`,`onlinetest`.`video`.`goods_category_id` AS `goods_category_id`,`onlinetest`.`video`.`summary` AS `summary`,`onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`goods`.`title_pic` AS `title_pic`,`onlinetest`.`goods`.`price` AS `price`,`onlinetest`.`goods`.`sale_price` AS `sale_price`,`onlinetest`.`goods`.`sale_count` AS `sale_count`,`onlinetest`.`goods`.`base_sale_count` AS `base_sale_count` from ((`onlinetest`.`video_similar_goods` join `onlinetest`.`goods` on(((`onlinetest`.`video_similar_goods`.`goods_id` = `onlinetest`.`goods`.`id`) and (`onlinetest`.`goods`.`status` = 3)))) join `onlinetest`.`video` on((`onlinetest`.`video_similar_goods`.`video_id` = `onlinetest`.`video`.`id`)));

DROP VIEW IF EXISTS `v_video_similar_goodslist`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_video_similar_goodslist` AS select `onlinetest`.`video_similar_goods`.`id` AS `id`,`onlinetest`.`video_similar_goods`.`video_id` AS `video_id`,`onlinetest`.`video_similar_goods`.`goods_id` AS `goods_id`,`onlinetest`.`video_similar_goods`.`status` AS `status`,`onlinetest`.`video_similar_goods`.`create_time` AS `create_time`,`onlinetest`.`video`.`first_img_path` AS `first_img_path`,`onlinetest`.`video`.`videopath` AS `videopath`,`onlinetest`.`video`.`view_count` AS `view_count`,`onlinetest`.`video`.`baby_name` AS `baby_name`,`onlinetest`.`video`.`goods_category_id` AS `goods_category_id`,`onlinetest`.`video`.`summary` AS `summary`,`onlinetest`.`goods`.`name` AS `name`,`onlinetest`.`goods`.`title_pic` AS `title_pic`,`onlinetest`.`goods`.`price` AS `price`,`onlinetest`.`goods`.`sale_price` AS `sale_price`,`onlinetest`.`goods`.`sale_count` AS `sale_count`,`onlinetest`.`goods`.`base_sale_count` AS `base_sale_count` from ((`onlinetest`.`video_similar_goods` join `onlinetest`.`goods` on(((`onlinetest`.`video_similar_goods`.`goods_id` = `onlinetest`.`goods`.`id`) and (`onlinetest`.`goods`.`status` = 3)))) join `onlinetest`.`video` on((`onlinetest`.`video_similar_goods`.`video_id` = `onlinetest`.`video`.`id`)));

DROP VIEW IF EXISTS `v_videodetail`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `v_videodetail` AS select `onlinetest`.`goods_category`.`name` AS `goods_category_name`,`onlinetest`.`video`.`id` AS `id`,`onlinetest`.`video`.`first_img_path` AS `first_img_path`,`onlinetest`.`video`.`videopath` AS `videopath`,`onlinetest`.`video`.`baby_name` AS `baby_name`,`onlinetest`.`video`.`view_count` AS `view_count`,`onlinetest`.`video`.`goods_category_id` AS `goods_category_id`,`onlinetest`.`video`.`summary` AS `summary`,`onlinetest`.`video`.`status` AS `status`,`onlinetest`.`video`.`create_time` AS `create_time`,`onlinetest`.`video`.`update_time` AS `update_time`,`onlinetest`.`goods_category`.`pid` AS `pid` from (`onlinetest`.`goods_category` join `onlinetest`.`video` on((`onlinetest`.`video`.`goods_category_id` = `onlinetest`.`goods_category`.`id`)));

DROP VIEW IF EXISTS `video_list_net`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `video_list_net` AS select `onlinetest`.`video`.`id` AS `id`,`onlinetest`.`video`.`first_img_path` AS `first_img_path`,`onlinetest`.`video`.`videopath` AS `videopath`,`onlinetest`.`video`.`baby_name` AS `baby_name`,`onlinetest`.`video`.`status` AS `status`,`onlinetest`.`video`.`create_time` AS `create_time`,`onlinetest`.`video`.`update_time` AS `update_time`,`onlinetest`.`video`.`summary` AS `summary`,`onlinetest`.`video`.`title` AS `title` from `onlinetest`.`video` where (not(`onlinetest`.`video`.`id` in (select distinct `onlinetest`.`main_cfg_video`.`video_id` from `onlinetest`.`main_cfg_video` where (`onlinetest`.`main_cfg_video`.`status` < 99))));

